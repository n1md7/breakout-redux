var zn=Object.defineProperty;var Ln=(e,t,s)=>t in e?zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var g=(e,t,s)=>(Ln(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();var xt=(e=>(e.development="development",e.production="production",e.githubPages="github",e.crazyGames="crazy",e.itchIo="itch",e.unitTest="test",e.e2eTest="e2e",e))(xt||{}),L=(e=>(e[e.Classic=0]="Classic",e[e.Dynamic=1]="Dynamic",e[e.Modern=2]="Modern",e[e.Bonus=3]="Bonus",e[e.Empty=4]="Empty",e))(L||{});class Rn{constructor(t){this.mode=t}isDevelopment(){return this.mode===xt.development}isCrazyGames(){return this.mode===xt.crazyGames}isItchIo(){return this.mode===xt.itchIo}isGithubPages(){return this.mode===xt.githubPages}isUnitTest(){return this.mode===xt.unitTest}isE2ETest(){return this.mode===xt.e2eTest}}const je=new Rn("github"),Nn=1,Un=.5;let ee=1,Ae=0,xi=27,Nt=[],_t=0,Ct=0,Tt=0,Zt=0,as,Jt;const $=(...e)=>console.assert(...e),oe=(e,t=d(),s="#fff",i=0,r=0,n=!1)=>{$(typeof s=="string"),Nt.push({pos:e,size:d(t),color:s,time:new Fe(i),angle:r,fill:n})},Xs=(e,t=0,s="#fff",i=0,r=!1)=>{$(typeof s=="string"),Nt.push({pos:e,size:t,color:s,time:new Fe(i),angle:0,fill:r})},jn=(e,t,s,i)=>oe(e,0,t,s,i),Fn=(e,t,s,i=.1,r)=>{const n=d((t.x-e.x)/2,(t.y-e.y)/2),a=d(i,n.length()*2);oe(e.add(n),a,s,r,n.angle(),1)},Ks=(e,t,s,i,r)=>{const n=d(nt(e.x-t.x/2,s.x-i.x/2),nt(e.y-t.y/2,s.y-i.y/2)),a=d(at(e.x+t.x/2,s.x+i.x/2),at(e.y+t.y/2,s.y+i.y/2));oe(n.lerp(a,.5),a.subtract(n),r)},Hn=(e,t,s=1,i="#fff",r=0,n=0,a="monospace")=>{$(typeof i=="string"),Nt.push({text:e,pos:t,size:s,color:i,time:new Fe(r),angle:n,font:a})},Wn=(e,t=Ms+".png")=>{Jt.download="screenshot.png",Jt.href=e.toDataURL("image/png").replace("image/png","image/octet-stream"),Jt.click()},Vn=()=>{document.body.appendChild(Jt=document.createElement("a")),Jt.style.display="none"},Ys=()=>{ht(xi)&&(_t=!_t),_t&&(ht(48)&&(ee=!ee),ht(49)&&(Ct=!Ct,Tt=0),ht(50)&&(Tt=!Tt,Ct=0),ht(51)&&(Zt=!Zt),ht(52)&&(Ae=!Ae),ht(53)&&(as=1))},Gn=()=>{if(Ce(K),as&&(Ce(K,1),K.drawImage(Z,0,0),Z.width|=0,Wn(x),as=0),Zt&&sr&&navigator.getGamepads){const e=navigator.getGamepads();for(let t=e.length;t--;){const s=e[t];if(s){const n=G,a=ls[t];for(let o=a.length;o--;){const l=n.add(d(o*1*2,t*1*3)),h=l.add(a[o].scale(1));Xs(l,1,"#fff7",0,1),Fn(l,h,"#f00"),jn(h,"#f00")}for(let o=s.buttons.length;o--;){const l=n.add(d(o*.2*2,t*1*3-1-.2)),h=s.buttons[o].pressed;Xs(l,.2,h?"#f00":"#fff7",0,1),Hn(o,l,.2)}}}}if(_t){const e=K;K=p;let t=1/0,s;for(const i of it){if(i.canvas||i.destroyed||!i.size.x||!i.size.y)continue;const r=gt.distanceSquared(i.pos);r<t&&(t=r,s=i);const n=d(at(i.size.x,.2),at(i.size.y,.2)),a=new m(!!i.collideTiles,!!i.collideSolidObjects,!!i.isSolid,i.parent?.2:.5),o=i.parent?new m(1,1,1,.5):new m(0,0,0,.8);vt(i.pos,n,a,i.angle,0),vt(i.pos,n.scale(.8),o,i.angle,0),i.parent&&ei(i.pos,i.parent.pos,.1,new m(0,0,1,.5),0)}if(s){const i=dr(s.pos,gt);i&&vt(i.floor().add(d(.5)),d(1),new m(0,1,1,.3)),vt(gt.floor().add(d(.5)),d(1),new m(0,0,1,.5),0,0),ei(gt,s.pos,.1,i?new m(1,0,0,.5):new m(0,1,0,.5),0);const r="mouse pos = "+gt+`
mouse collision = `+Pi(gt)+`

--- object info ---
`+s.toString();or(r,Es,24,new m,.05,0,0,"monospace")}Ce(K=e)}{p.lineWidth=2;const e=Un*Y;Nt.forEach(t=>{p.save();const s=We(t.pos);if(p.translate(s.x|0,s.y|0),p.rotate(t.angle),p.fillStyle=p.strokeStyle=t.color,t.text!=null)p.font=t.size*Y+"px "+t.font,p.textAlign="center",p.textBaseline="middle",p.fillText(t.text,0,0);else if(t.size==0||t.size.x===0&&t.size.y===0)p.fillRect(-e/2,-1,e,3),p.fillRect(-1,-e/2,3,e);else if(t.size.x!=null){const i=t.size.x*Y|0,r=t.size.y*Y|0;t.fill&&p.fillRect(-i/2|0,-r/2|0,i,r),p.strokeRect(-i/2|0,-r/2|0,i,r)}else p.beginPath(),p.arc(0,0,t.size*Y,0,9),t.fill&&p.fill(),p.stroke();p.restore()}),Nt=Nt.filter(t=>t.time<0)}{p.save(),p.fillStyle="#fff",p.textAlign="left",p.textBaseline="top",p.font="28px monospace",p.shadowColor="#000",p.shadowBlur=9;let e=9,t=-20,s=30;if(_t){p.fillText(Ms,e,t+=s),p.fillText("Objects: "+it.length,e,t+=s),p.fillText("Time: "+Xn(q),e,t+=s),p.fillText("---------",e,t+=s),p.fillStyle="#f00",p.fillText("ESC: Debug Overlay",e,t+=s),p.fillStyle=Ct?"#f00":"#fff",p.fillText("1: Debug Physics",e,t+=s),p.fillStyle=Tt?"#f00":"#fff",p.fillText("2: Debug Particles",e,t+=s),p.fillStyle=Zt?"#f00":"#fff",p.fillText("3: Debug Gamepads",e,t+=s),p.fillStyle=Ae?"#f00":"#fff",p.fillText("4: God Mode",e,t+=s),p.fillStyle="#fff",p.fillText("5: Save Screenshot",e,t+=s);let i="";for(const n in W[0])n&&se(n,0)&&(i+=n+" ");i&&p.fillText("Keys Down: "+i,e,t+=s);let r="";if(W[1])for(const n in W[1])n&&se(n,1)&&(r+=n+" ");r&&p.fillText("Gamepad: "+r,e,t+=s)}else p.fillText(Ct?"Debug Physics":"",e,t+=s),p.fillText(Tt?"Debug Particles":"",e,t+=s),p.fillText(Ae?"God Mode":"",e,t+=s),p.fillText(Zt?"Debug Gamepads":"",e,t+=s);p.restore()}},Pe=Math.PI,J=e=>e<0?-e:e,nt=(e,t)=>e<t?e:t,at=(e,t)=>e>t?e:t,Ut=e=>e<0?-1:1,R=(e,t=0,s=1)=>e<t?t:e>s?s:e,jt=(e,t=0,s=1)=>s-t?R((e-t)/(s-t)):0,Gt=(e,t=0,s=1)=>t+R(e)*(s-t),qs=(e,t,s,i)=>J(e.x-s.x)*2<t.x+i.x&&J(e.y-s.y)*2<t.y+i.y,Xn=e=>(e/60|0)+":"+(e%60<10?"0":"")+(e%60|0),I=(e=1,t=0)=>t+(e-t)*Math.random(),Wt=(e=1,t=0)=>I(e,t)|0,Kn=()=>Wt(2)*2-1,Yn=(e=1,t=0)=>e>0?Si(e*I(t/e,1)**.5):new T,Si=(e=1)=>new T().setAngle(I(2*Pe),e),Zs=(e=new m,t=new m(0,0,0,1),s)=>s?e.lerp(t,I()):new m(I(e.r,t.r),I(e.g,t.g),I(e.b,t.b),I(e.a,t.a)),d=(e=0,t)=>e.x==null?new T(e,t??e):new T(e.x,e.y),et=e=>!isNaN(e.x)&&!isNaN(e.y);class T{constructor(t=0,s=0){this.x=t,this.y=s}copy(){return new T(this.x,this.y)}add(t){return $(et(t)),new T(this.x+t.x,this.y+t.y)}subtract(t){return $(et(t)),new T(this.x-t.x,this.y-t.y)}multiply(t){return $(et(t)),new T(this.x*t.x,this.y*t.y)}divide(t){return $(et(t)),new T(this.x/t.x,this.y/t.y)}scale(t){return $(!et(t)),new T(this.x*t,this.y*t)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(t){return this.distanceSquared(t)**.5}distanceSquared(t){return(this.x-t.x)**2+(this.y-t.y)**2}normalize(t=1){const s=this.length();return s?this.scale(t/s):new T(0,t)}clampLength(t=1){const s=this.length();return s>t?this.scale(t/s):this}dot(t){return $(et(t)),this.x*t.x+this.y*t.y}cross(t){return $(et(t)),this.x*t.y-this.y*t.x}angle(){return Math.atan2(this.x,this.y)}setAngle(t=0,s=1){return this.x=s*Math.sin(t),this.y=s*Math.cos(t),this}rotate(t){const s=Math.cos(t),i=Math.sin(t);return new T(this.x*s-this.y*i,this.x*i+this.y*s)}direction(){return J(this.x)>J(this.y)?this.x<0?3:1:this.y<0?2:0}invert(){return new T(this.y,-this.x)}floor(){return new T(Math.floor(this.x),Math.floor(this.y))}area(){return J(this.x*this.y)}lerp(t,s){return $(et(t)),this.add(t.subtract(this).scale(R(s)))}arrayCheck(t){return this.x>=0&&this.y>=0&&this.x<t.x&&this.y<t.y}toString(t=3){return`(${(this.x<0?"":" ")+this.x.toFixed(t)},${(this.y<0?"":" ")+this.y.toFixed(t)} )`}}class m{constructor(t=1,s=1,i=1,r=1){this.r=t,this.g=s,this.b=i,this.a=r}copy(){return new m(this.r,this.g,this.b,this.a)}add(t){return new m(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new m(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}multiply(t){return new m(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}divide(t){return new m(this.r/t.r,this.g/t.g,this.b/t.b,this.a/t.a)}scale(t,s=t){return new m(this.r*t,this.g*t,this.b*t,this.a*s)}clamp(){return new m(R(this.r),R(this.g),R(this.b),R(this.a))}lerp(t,s){return this.add(t.subtract(this).scale(R(s)))}setHSLA(t=0,s=0,i=1,r=1){const n=i<.5?i*(1+s):i+s-i*s,a=2*i-n,o=(l,h,c)=>(c=(c%1+1)%1)<1/6?l+(h-l)*6*c:c<1/2?h:c<2/3?l+(h-l)*(2/3-c)*6:l;return this.r=o(a,n,t+1/3),this.g=o(a,n,t),this.b=o(a,n,t-1/3),this.a=r,this}getHSLA(){const t=R(this.r),s=R(this.g),i=R(this.b),r=R(this.a),n=Math.max(t,s,i),a=Math.min(t,s,i),o=(n+a)/2;let l=0,h=0;if(n!=a){let c=n-a;h=o>.5?c/(2-n-a):c/(n+a),t==n?l=(s-i)/c+(s<i?6:0):s==n?l=(i-t)/c+2:i==n&&(l=(t-s)/c+4)}return[l/6,h,o,r]}mutate(t=.05,s=0){return new m(this.r+I(t,-t),this.g+I(t,-t),this.b+I(t,-t),this.a+I(s,-s)).clamp()}toString(t=1){const s=i=>((i=i*255|0)<16?"0":"")+i.toString(16);return"#"+s(this.r)+s(this.g)+s(this.b)+(t?s(this.a):"")}setHex(t){const s=i=>R(parseInt(t.slice(i,i+2),16)/255);return this.r=s(1),this.g=s(3),this.b=s(5),this.a=t.length>7?s(7):1,this}rgbaInt(){const t=a=>R(a)*255|0,s=t(this.r),i=t(this.g)<<8,r=t(this.b)<<16,n=t(this.a)<<24;return s+i+r+n}}class Fe{constructor(t){this.time=t==null?void 0:q+t,this.setTime=t}set(t=0){this.time=q+t,this.setTime=t}unset(){this.time=void 0}isSet(){return this.time!=null}active(){return q<=this.time}elapsed(){return q>this.time}get(){return this.isSet()?q-this.time:0}getPercent(){return this.isSet()?jt(this.time-q,this.setTime,0):0}toString(){return this.unset()?"unset":Math.abs(this.get())+" seconds "+(this.get()<0?"before":"after")}valueOf(){return this.get()}}let G=d(),Y=32,Js=d(1920,1200),ve=d(),vi=1,qn="arial",_i=1,He=d(16),Xt=.3,Zn=1,Jn=1,Qn=1,tr=0,er=.8,pe=1,me=0,Qs=1,sr=1,Qt=1,Cs=.5,ir=40,nr=.7,ti=5,ye=.5;d(640,80);class Dt{constructor(t=d(),s=d(1),i=-1,r=He,n=0,a,o=0){$(et(t)&&et(s)),this.pos=t.copy(),this.size=s,this.drawSize,this.tileIndex=i,this.tileSize=r,this.angle=n,this.color=a,this.additiveColor,this.mass=Zn,this.damping=Jn,this.angleDamping=Qn,this.elasticity=tr,this.friction=er,this.gravityScale=1,this.renderOrder=o,this.velocity=new T,this.angleVelocity=0,this.spawnTime=q,this.children=[],this.collideTiles=1,it.push(this)}update(){const t=this.parent;if(t){this.pos=this.localPos.multiply(d(t.getMirrorSign(),1)).rotate(-t.angle).add(t.pos),this.angle=t.getMirrorSign()*this.localAngle+t.angle;return}this.velocity.x=R(this.velocity.x,-pe,pe),this.velocity.y=R(this.velocity.y,-pe,pe);const s=this.pos.copy();if(this.velocity.y+=me*this.gravityScale,this.pos.x+=this.velocity.x*=this.damping,this.pos.y+=this.velocity.y*=this.damping,this.angle+=this.angleVelocity*=this.angleDamping,$(this.angleDamping>=0&&this.angleDamping<=1),$(this.damping>=0&&this.damping<=1),!this.mass)return;const i=this.velocity.y<0;if(this.groundObject){const r=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=r+(this.velocity.x-r)*this.friction,this.groundObject=0}if(this.collideSolidObjects)for(const n of Gi){if(!this.isSolid&!n.isSolid||n.destroyed||n.parent||n==this||!qs(this.pos,this.size,n.pos,n.size)||!this.collideWithObject(n)|!n.collideWithObject(this))continue;if(qs(s,this.size,n.pos,n.size)){const u=s.subtract(n.pos),f=u.length(),b=.001,w=f<.01?Si(b):u.scale(b/f);this.velocity=this.velocity.add(w),n.mass&&(n.velocity=n.velocity.subtract(w)),_t&&Ct&&Ks(this.pos,this.size,n.pos,n.size,"#f00");continue}const a=this.size.add(n.size),o=(s.y-n.pos.y)*2>a.y+me,l=J(s.y-n.pos.y)*2<a.y,h=J(s.x-n.pos.x)*2<a.x,c=at(this.elasticity,n.elasticity);if(o|h|!l){if(this.pos.y=n.pos.y+(a.y/2+.001)*Ut(s.y-n.pos.y),n.groundObject&&i||!n.mass)i&&(this.groundObject=n),this.velocity.y*=-c;else if(n.mass){const u=(this.mass*this.velocity.y+n.mass*n.velocity.y)/(this.mass+n.mass),f=this.velocity.y*(this.mass-n.mass)/(this.mass+n.mass)+n.velocity.y*2*n.mass/(this.mass+n.mass),b=n.velocity.y*(n.mass-this.mass)/(this.mass+n.mass)+this.velocity.y*2*this.mass/(this.mass+n.mass);this.velocity.y=Gt(c,u,f),n.velocity.y=Gt(c,u,b)}}if(!o&l)if(this.pos.x=n.pos.x+(a.x/2+.001)*Ut(s.x-n.pos.x),n.mass){const u=(this.mass*this.velocity.x+n.mass*n.velocity.x)/(this.mass+n.mass),f=this.velocity.x*(this.mass-n.mass)/(this.mass+n.mass)+n.velocity.x*2*n.mass/(this.mass+n.mass),b=n.velocity.x*(n.mass-this.mass)/(this.mass+n.mass)+this.velocity.x*2*this.mass/(this.mass+n.mass);this.velocity.x=Gt(c,u,f),n.velocity.x=Gt(c,u,b)}else this.velocity.x*=-c;_t&&Ct&&Ks(this.pos,this.size,n.pos,n.size,"#f0f")}if(this.collideTiles&&we(this.pos,this.size,this)&&!we(s,this.size,this)){const r=we(new T(s.x,this.pos.y),this.size,this),n=we(new T(this.pos.x,s.y),this.size,this);if(r|!n){this.groundObject=i,this.velocity.y*=-this.elasticity;const a=(s.y-this.size.y/2|0)-(s.y-this.size.y/2);a<0&&a>this.damping*this.velocity.y+me*this.gravityScale&&(this.velocity.y=this.damping?(a-me*this.gravityScale)/this.damping:0),this.pos.y=s.y}n&&(this.pos.x=s.x,this.velocity.x*=-this.elasticity)}}render(){De(this.pos,this.drawSize||this.size,this.tileIndex,this.tileSize,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed){this.destroyed=1,this.parent&&this.parent.removeChild(this);for(const t of this.children)t.destroy(t.parent=0)}}collideWithTile(t,s){return t>0}collideWithTileRaycast(t,s){return t>0}collideWithObject(t){return 1}getAliveTime(){return q-this.spawnTime}applyAcceleration(t){this.mass&&(this.velocity=this.velocity.add(t))}applyForce(t){this.applyAcceleration(t.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(t,s=d(),i=0){$(!t.parent&&!this.children.includes(t)),this.children.push(t),t.parent=this,t.localPos=s.copy(),t.localAngle=i}removeChild(t){$(t.parent==this&&this.children.includes(t)),this.children.splice(this.children.indexOf(t),1),t.parent=0}setCollision(t=1,s=1,i=1){$(t||!s),this.collideSolidObjects=t,this.isSolid=s,this.collideTiles=i}toString(){{let t="type = "+this.constructor.name;return(this.pos.x||this.pos.y)&&(t+=`
pos = `+this.pos),(this.velocity.x||this.velocity.y)&&(t+=`
velocity = `+this.velocity),(this.size.x||this.size.y)&&(t+=`
size = `+this.size),this.angle&&(t+=`
angle = `+this.angle.toFixed(3)),this.color&&(t+=`
color = `+this.color),t}}}let x,K,Z,p,mt=d();const st=new Image;let Kt,Yt,os;const rr=e=>($(mt.x&&mt.y,"mainCanvasSize is invalid"),e.add(d(.5)).subtract(mt.scale(.5)).multiply(d(1/Y,-1/Y)).add(G)),We=e=>($(mt.x&&mt.y,"mainCanvasSize is invalid"),e.subtract(G).multiply(d(Y,-Y)).add(mt.scale(.5)).subtract(d(.5)));function De(e,t=d(1),s=-1,i=He,r=new m,n=0,a,o=new m(0,0,0,0),l=_i){if(ee&&++os,l)if(s<0||!st.width)oi(e.x,e.y,t.x,t.y,n,0,0,0,0,0,r.rgbaInt());else{const h=Kt.x/i.x|0,c=i.x/Kt.x,u=i.y/Kt.y,f=s%h*c,b=(s/h|0)*u;oi(e.x,e.y,a?-t.x:t.x,t.y,n,f+Yt.x,b+Yt.y,f-Yt.x+c,b-Yt.y+u,r.rgbaInt(),o.rgbaInt())}else ar(e,t,n,a,h=>{if(s<0)h.fillStyle=r,h.fillRect(-.5,-.5,1,1);else{const c=Kt.x/i.x|0,u=s%c*i.x+Xt,f=(s/c|0)*i.y+Xt,b=i.x-2*Xt,w=i.y-2*Xt;h.globalAlpha=r.a,h.drawImage(st,u,f,b,w,-.5,-.5,1,1)}})}function vt(e,t,s,i,r){De(e,t,-1,He,s,i,0,0,r)}function ei(e,t,s=.1,i,r){const n=d((t.x-e.x)/2,(t.y-e.y)/2),a=d(s,n.length()*2);vt(e.add(n),a,i,n.angle(),r)}function ar(e,t,s,i,r,n=K){e=We(e),t=t.scale(Y),n.save(),n.translate(e.x+.5|0,e.y+.5|0),n.rotate(s),n.scale(i?-t.x:t.x,t.y),r(n),n.restore()}function si(e,t=_i){t?$i(e):K.globalCompositeOperation=e?"lighter":"source-over"}function or(e,t,s=1,i=new m,r=0,n=new m(0,0,0),a="center",o=qn,l=p){l.fillStyle=i,l.lineWidth=r,l.strokeStyle=n,l.textAlign=a,l.font=s+"px "+o,l.textBaseline="middle",l.lineJoin="round",t=t.copy(),(e+"").split(`
`).forEach(h=>{r&&l.strokeText(h,t.x,t.y),l.fillText(h,t.x,t.y),t.y+=s})}let Ze;class Je{constructor(t,s=d(8),i=d(0,1),r=0,n=p){Ze||((Ze=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC"),this.image=t||Ze,this.tileSize=s,this.paddingSize=i,this.startTileIndex=r,this.context=n}drawTextScreen(t,s,i=4,r){const n=this.context;n.save(),n.imageSmoothingEnabled=!vi;const a=this.tileSize,o=a.add(this.paddingSize).scale(i),l=this.image.width/this.tileSize.x|0;(t+"").split(`
`).forEach((h,c)=>{const u=r?h.length*a.x*i/2|0:0;for(let f=h.length;f--;){let b=h[f].charCodeAt();(b<32||b>127)&&(b=127);const w=this.startTileIndex+b-32,_=w%l,D=w/l|0,k=s.add(d(f,c).multiply(o));n.drawImage(this.image,_*a.x,D*a.y,a.x,a.y,k.x-u,k.y,a.x*i,a.y*i)}}),n.restore()}drawText(t,s,i=1,r){this.drawTextScreen(t,We(s).floor(),i*Y|0,r)}}const se=(e,t=0)=>W[t]&&W[t][e]&1,ht=(e,t=0)=>W[t]&&W[t][e]&2?1:0,lr=()=>W=[[]],Ts=ht;let gt=d(),Es=d(),ks=0;const It=(e,t=0)=>se(e,t+1),As=(e,t=0)=>ht(e,t+1);let W=[[]];function ii(){Ti||document.hasFocus()||lr(),gt=rr(Es),hr()}function ni(){for(const e of W)for(const t in e)e[t]&=1}onkeydown=e=>{e.target==document.body&&(e.repeat||(W[ks=0][Ci(e.which)]=3))};onkeyup=e=>{e.target==document.body&&(W[0][Ci(e.which)]=4)};const Ci=e=>e==87?38:e==83?40:e==65?37:e==68?39:e;onmousedown=e=>{W[ks=0][e.button]=3,onmousemove(e),e.button&&e.preventDefault()};onmouseup=e=>W[0][e.button]=W[0][e.button]&2|4;onmousemove=e=>Es=cr(e);onwheel=e=>e.ctrlKey||Ut(e.deltaY);oncontextmenu=e=>!1;const cr=e=>{if(!x)return d();const t=x.getBoundingClientRect();return d(x.width,x.height).multiply(d(jt(e.x,t.left,t.right),jt(e.y,t.top,t.bottom)))},ls=[];function hr(){if(!navigator||!navigator.getGamepads||!document.hasFocus()&&!Nn)return;const e=navigator.getGamepads();for(let t=e.length;t--;){const s=e[t],i=W[t+1]||(W[t+1]=[]),r=ls[t]||(ls[t]=[]);if(s){const o=l=>l>.3?jt(l,.3,.8):l<-.3?-jt(-l,.3,.8):0;for(let l=0;l<s.axes.length-1;l+=2)r[l>>1]=d(o(s.axes[l]),o(-s.axes[l+1])).clampLength();for(let l=s.buttons.length;l--;){const h=s.buttons[l];i[l]=h.pressed?1+2*!It(l,t):4*It(l,t),ks|=!t&&h.pressed}{const l=d(It(15,t)-It(14,t),It(12,t)-It(13,t));l.lengthSquared()&&(r[0]=l.clampLength())}}}}const Ti=window.ontouchstart!==void 0;if(Ti){let e,t=onmousedown,s=onmouseup;onmousedown=onmouseup=()=>0,ontouchstart=i=>(ur(0),ontouchstart=ontouchmove=ontouchend=r=>{r.button=0;const n=r.touches.length;return n?(r.x=r.touches[0].clientX,r.y=r.touches[0].clientY,e?onmousemove(r):t(r)):e&&s(r),e=n,!0},ontouchstart(i))}new Fe;let be=class{constructor(t,s=ir,i=nr){Qt&&(this.range=s,this.taper=i,this.randomness=t[1]||0,t[1]=0,this.cachedSamples=ki(...t))}play(t,s=1,i=1,r=1){if(!Qt)return;let n;if(t){const o=this.range;if(o){const l=G.distanceSquared(t);if(l>o*o)return;s*=jt(l**.5,o,o*this.taper)}n=We(t).x*2/x.width-1}const a=i+i*this.randomness*r*I(-1,1);return Ei([this.cachedSamples],s,a,n)}playNote(t,s,i){if(Qt)return this.play(s,i,2**(t/12),0)}},ct;function Ei(e,t=1,s=1,i=0,r=0){if(!Qt||(ct||(ct=new AudioContext),ct.resume(),ct.state!="running"))return;const n=ct.createBuffer(e.length,e[0].length,X),a=ct.createBufferSource();e.forEach((l,h)=>n.getChannelData(h).set(l)),a.buffer=n,a.playbackRate.value=s,a.loop=r;const o=ct.createGain();return o.gain.value=Cs*t,o.connect(ct.destination),a.connect(new StereoPannerNode(ct,{pan:R(i,-1,1)})).connect(o),a.start(),a}const ur=(...e)=>Ei([ki(...e)]),X=44100;function ki(e=1,t=.05,s=220,i=0,r=0,n=.1,a=0,o=1,l=0,h=0,c=0,u=0,f=0,b=0,w=0,_=0,D=0,k=1,C=0,O=0){let A=Pe*2,tt=l*=500*A/X/X,wt=[],fe=s*=(1+t*I(-1,1))*A/X,lt=0,ge=0,U=0,Mt=1,Ye=0,On=0,ft=0,qe,$t;for(i=i*X+9,C*=X,r*=X,n*=X,D*=X,h*=500*A/X**3,w*=A/X,c*=A/X,u*=X,f=f*X|0,$t=i+C+r+n+D|0;U<$t;wt[U++]=ft)++On%(_*100|0)||(ft=a?a>1?a>2?a>3?Math.sin((lt%A)**3):at(nt(Math.tan(lt),1),-1):1-(2*lt/A%2+2)%2:1-4*J(Math.round(lt/A)-lt/A):Math.sin(lt),ft=(f?1-O+O*Math.sin(A*U/f):1)*Ut(ft)*J(ft)**o*e*Cs*(U<i?U/i:U<i+C?1-(U-i)/C*(1-k):U<i+C+r?k:U<$t-D?($t-U-D)/n*k:0),ft=D?ft/2+(D>U?0:(U<$t-D?1:($t-U)/D)*wt[U-D|0]/2):ft),qe=(s+=l+=h)*Math.cos(w*ge++),lt+=qe-qe*b*(1-(Math.sin(U)+1)*1e9%2),Mt&&++Mt>u&&(s+=c,fe+=c,Mt=0),f&&!(++Ye%f)&&(s=fe,l=tt,Mt||(Mt=1));return wt}let Ai=[],te=d();const Pi=e=>e.arrayCheck(te)?Ai[(e.y|0)*te.x+e.x|0]:0;function we(e,t=d(),s){const i=at(e.x-t.x/2|0,0),r=at(e.y-t.y/2|0,0),n=nt(e.x+t.x/2,te.x),a=nt(e.y+t.y/2,te.y);for(let o=r;o<a;++o)for(let l=i;l<n;++l){const h=Ai[o*te.x+l];if(h&&(!s||s.collideWithTile(h,new T(l,o))))return 1}}function dr(e,t,s){const i=(t=t.floor()).subtract(e=e.floor()),r=J(i.x),n=-J(i.y),a=Ut(i.x),o=Ut(i.y);for(let l=e.x,h=e.y,c=r+n;;){const u=Pi(d(l,h));if(u&&(s?s.collideWithTileRaycast(u,new T(l,h)):u>0))return new T(l+.5,h+.5);if(l==t.x&h==t.y)break;const f=2*c;f>=n&&(c+=n,l+=a),f<=r&&(c+=r,h+=o)}}class ri extends Dt{constructor(t,s,i=0,r=0,n=100,a=Pe,o=-1,l=He,h=new m,c=new m,u=new m(1,1,1,0),f=new m(1,1,1,0),b=.5,w=.1,_=1,D=.1,k=.05,C=1,O=1,A=0,tt=Pe,wt=.1,fe=.2,lt,ge,U=1,Mt=ge?1e9:0,Ye){super(t,new T,o,l,s,void 0,Mt),this.emitSize=i,this.emitTime=r,this.emitRate=n,this.emitConeAngle=a,this.colorStartA=h,this.colorStartB=c,this.colorEndA=u,this.colorEndB=f,this.randomColorLinear=U,this.particleTime=b,this.sizeStart=w,this.sizeEnd=_,this.speed=D,this.angleSpeed=k,this.damping=C,this.angleDamping=O,this.gravityScale=A,this.particleConeAngle=tt,this.fadeRate=wt,this.randomness=fe,this.collideTiles=lt,this.additive=ge,this.localSpace=Ye,this.trailScale=0,this.emitTimeBuffer=0}update(){if(this.parent&&super.update(),!this.emitTime|this.getAliveTime()<=this.emitTime){if(this.emitRate*Qs){const t=1/this.emitRate/Qs;for(this.emitTimeBuffer+=Vi;this.emitTimeBuffer>0;this.emitTimeBuffer-=t)this.emitParticle()}}else this.destroy();Tt&&oe(this.pos,d(this.emitSize),"#0f0",0,this.angle)}emitParticle(){let t=this.emitSize.x!=null?new T(I(-.5,.5),I(-.5,.5)).multiply(this.emitSize).rotate(this.angle):Yn(this.emitSize/2),s=I(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(t=this.pos.add(t),s+=this.angle);const i=new fr(t,this.tileIndex,this.tileSize,s),r=this.randomness,n=_=>_+_*I(r,-r),a=n(this.particleTime),o=n(this.sizeStart),l=n(this.sizeEnd),h=n(this.speed),c=n(this.angleSpeed)*Kn(),u=I(this.emitConeAngle,-this.emitConeAngle),f=Zs(this.colorStartA,this.colorStartB,this.randomColorLinear),b=Zs(this.colorEndA,this.colorEndB,this.randomColorLinear),w=this.localSpace?u:this.angle+u;return i.colorStart=f,i.colorEndDelta=b.subtract(f),i.velocity=new T().setAngle(w,h),i.angleVelocity=c,i.lifeTime=a,i.sizeStart=o,i.sizeEndDelta=l-o,i.fadeRate=this.fadeRate,i.damping=this.damping,i.angleDamping=this.angleDamping,i.elasticity=this.elasticity,i.friction=this.friction,i.gravityScale=this.gravityScale,i.collideTiles=this.collideTiles,i.additive=this.additive,i.renderOrder=this.renderOrder,i.trailScale=this.trailScale,i.mirror=Wt(2),i.localSpaceEmitter=this.localSpace&&this,i.destroyCallback=this.particleDestroyCallback,this.particleCreateCallback&&this.particleCreateCallback(i),i}render(){}}class fr extends Dt{constructor(t,s,i,r){super(t,new T,s,i,r)}render(){const t=nt((q-this.spawnTime)/this.lifeTime,1),s=this.sizeStart+t*this.sizeEndDelta,i=new T(s,s),r=this.fadeRate/2,n=new m(this.colorStart.r+t*this.colorEndDelta.r,this.colorStart.g+t*this.colorEndDelta.g,this.colorStart.b+t*this.colorEndDelta.b,(this.colorStart.a+t*this.colorEndDelta.a)*(t<r?t/r:t>1-r?(1-t)/r:1));this.additive&&si(1);let a=this.pos,o=this.angle;if(this.localSpaceEmitter&&(a=this.localSpaceEmitter.pos.add(a.rotate(-this.localSpaceEmitter.angle)),o+=this.localSpaceEmitter.angle),this.trailScale){let l=this.velocity;this.localSpaceEmitter&&(l=l.rotate(-this.localSpaceEmitter.angle));const h=l.length(),c=l.scale(1/h),u=h*this.trailScale;i.y=at(i.x,u),o=c.angle(),De(a.add(c.multiply(d(0,-u/2))),i,this.tileIndex,this.tileSize,n,o,this.mirror)}else De(a,i,this.tileIndex,this.tileSize,n,o,this.mirror);this.additive&&si(),Tt&&oe(a,i,"#f005",0,o),t==1&&(this.color=n,this.size=i,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}let Qe=[],xe;function gr(){if(!Qe.length)return;const e=Qe[0],t=ds-xe;if(!xe)xe=ds;else if(t>ti)Qe.shift(xe=0);else{const s=ti-ye,i=t<ye?1-t/ye:t>s?(t-s)/ye:0;e.render(i)}}let rt,y,Di,_e,Mi,Ot,cs,pt,hs,Ps;function pr(){rt=document.createElement("canvas"),y=rt.getContext("webgl",{antialias:!1}),Di=Bi(st),document.body.appendChild(rt),_e=Ii("precision highp float;uniform mat4 m;attribute vec2 p,t;attribute vec4 c,a;varying vec4 v,d,e;void main(){gl_Position=m*vec4(p,1,1);v=vec4(t,p);d=c;e=a;}","precision highp float;varying vec4 v,d,e;uniform sampler2D s;void main(){gl_FragColor=texture2D(s,v.xy)*d+e;}");const e=new ArrayBuffer(Wi);Mi=y.createBuffer(),Ot=new Float32Array(e),cs=new Uint32Array(e),pt=0}function $i(e){Ps=e}function ai(e,t){const s=y.createShader(t);if(y.shaderSource(s,e),y.compileShader(s),!y.getShaderParameter(s,Mr))throw y.getShaderInfoLog(s);return s}function Ii(e,t){const s=y.createProgram();if(y.attachShader(s,ai(e,Dr)),y.attachShader(s,ai(t,Pr)),y.linkProgram(s),!y.getProgramParameter(s,$r))throw y.getProgramInfoLog(s);return s}function Bi(e){const t=y.createTexture();y.bindTexture(ut,t),e&&e.width&&y.texImage2D(ut,0,$e,$e,Me,e);const s=Sr;return y.texParameteri(ut,_r,s),y.texParameteri(ut,vr,s),y.texParameteri(ut,Cr,ci),y.texParameteri(ut,Tr,ci),t}function mr(){y.viewport(0,0,rt.width=x.width,rt.height=x.height),y.clear(Er),y.useProgram(_e),y.activeTexture(Ui),y.bindTexture(ut,Di),y.bindBuffer(ie,Mi),y.bufferData(ie,Wi,Ar),$i();let e=0;const t=(r,n,a,o,l=0)=>{const h=y.getAttribLocation(_e,r);y.enableVertexAttribArray(h),y.vertexAttribPointer(h,o,n,l,Hi,e),e+=o*a};t("p",us,4,2),t("t",us,4,2),t("c",Me,1,4,1),t("a",Me,1,4,1);const s=2*Y/x.width,i=2*Y/x.height;y.uniformMatrix4fv(y.getUniformLocation(_e,"m"),0,new Float32Array([s,0,0,0,0,i,0,0,1,1,-1,1,-1-s*G.x,-1-i*G.y,0,0]))}function Ds(){if(!pt)return;const e=hs?li:xr;y.blendFuncSeparate(wr,e,li,e),y.enable(Ni),y.bufferSubData(ie,0,Ot.subarray(0,pt*Ie*ji)),y.drawArrays(Ri,0,pt*Ie),pt=0,hs=Ps}function Ce(e,t){!pt&&!t||(Ds(),t&&e.drawImage(rt,0,0))}function oi(e,t,s,i,r,n,a,o,l,h,c=0){(pt==Fi||hs!=Ps)&&Ds();const u=Math.cos(r)/2,f=Math.sin(r)/2,b=u*s,w=u*i,_=f*s,D=f*i;for(let k=6,C=pt++*Ie*ji;k--;){const O=k-4&&k>1,A=k-5&&k-2&&k-1;Ot[C++]=e+(O?-b:b)+(A?D:-D),Ot[C++]=t+(A?w:-w)+(O?_:-_),Ot[C++]=O?n:o,Ot[C++]=A?a:l,cs[C++]=h,cs[C++]=c}}let zt,Oi,zi,Li;function yr(e,t){$(!zt),e||(e="void mainImage(out vec4 c,vec2 p){c=texture2D(iChannel0,p/iResolution.xy);}"),zt=Ii("precision highp float;attribute vec2 p;void main(){gl_Position=vec4(p,1,1);}",`precision highp float;uniform sampler2D iChannel0;uniform vec3 iResolution;uniform float iTime;
`+e+`
void main(){mainImage(gl_FragColor,gl_FragCoord.xy);gl_FragColor.a=1.;}`),Oi=y.createBuffer(),zi=Bi(),Li=t,x.style.visibility="hidden"}function br(){if(!zt)return;Ds(),K.drawImage(rt,0,0),Li&&(K.drawImage(Z,0,0),Z.width=x.width),y.useProgram(zt),y.disable(Ni),y.bindBuffer(ie,Oi),y.bufferData(ie,new Float32Array([-3,1,1,-3,1,1]),kr),y.pixelStorei(Ir,!0),y.activeTexture(Ui),y.bindTexture(ut,zi),y.texImage2D(ut,0,$e,$e,Me,x);const e=8,t=y.getAttribLocation(zt,"p");y.enableVertexAttribArray(t),y.vertexAttribPointer(t,2,us,0,e,0);const s=i=>y.getUniformLocation(zt,i);y.uniform1i(s("iChannel0"),0),y.uniform1f(s("iTime"),q),y.uniform3f(s("iResolution"),x.width,x.height,1),y.drawArrays(Ri,0,3)}const li=1,Ri=4,wr=770,xr=771,Ni=3042,ut=3553,Me=5121,us=5126,$e=6408,Sr=9728,vr=10240,_r=10241,Cr=10242,Tr=10243,Er=16384,ci=33071,Ui=33984,ie=34962,kr=35044,Ar=35048,Pr=35632,Dr=35633,Mr=35713,$r=35714,Ir=37440,Ie=6,ji=6,Fi=65536,Hi=4*2*2+4*2,Wi=Fi*Ie*Hi,Ms="LittleJS",Br="1.6.4",$s=60,Vi=1/$s;let it=[],Gi=[],Or=0,q=0,ds=0,fs=0;function hi(e){fs=e}function zr(e,t,s,i,r,n){st.onerror=st.onload=()=>{Yt=d(Xt).divide(Kt=d(st.width,st.height)),st.onload=()=>$(1);const c="margin:0;overflow:hidden;background:#000;touch-action:none;user-select:none;-webkit-user-select:none";document.body.style=c,document.body.appendChild(x=document.createElement("canvas")),K=x.getContext("2d"),Vn(),pr(),document.body.appendChild(Z=document.createElement("canvas")),p=Z.getContext("2d");const u="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)";(rt||x).style=x.style=Z.style=u,e(),h()};let a=0,o,l;function h(c=0){let u=c-a;a=c,l=Gt(.05,l,1e3/(u||1));const f=se(107),b=se(109);if(u*=f?5:b?.2:1,ds+=u/1e3,o+=!fs*u,f||(o=nt(o,50)),ve.x){x.width=ve.x,x.height=ve.y;const w=innerWidth/innerHeight,_=x.width/x.height;(rt||x).style.width=x.style.width=Z.style.width=w<_?"100%":"",(rt||x).style.height=x.style.height=Z.style.height=w<_?"":"100%"}else x.width=nt(innerWidth,Js.x),x.height=nt(innerHeight,Js.y);if(Z.width=x.width,Z.height=x.height,mt=d(x.width,x.height),fs)ii(),Ys(),s(),ni();else{let w=0;for(o<0&&o>-9&&(w=o,o=0);o>=0;o-=1e3/$s)ii(),t(),Rr(),Ys(),s(),ni();o+=w}Lr(),i(),it.sort((w,_)=>w.renderOrder-_.renderOrder);for(const w of it)w.destroyed||w.render();if(r(),br(),gr(),Gn(),Ce(K),ee){p.textAlign="right",p.textBaseline="top",p.font="1em monospace",p.fillStyle="#000";const w=Ms+" v"+Br+" / "+os+" / "+it.length+" / "+l.toFixed(1)+" GL";p.fillText(w,x.width-3,3),p.fillStyle="#fff",p.fillText(w,x.width-2,2),os=0}requestAnimationFrame(h)}n?st.src=n:st.onload()}function Lr(){mt=d(x.width,x.height),K.imageSmoothingEnabled=!vi,mr()}function Rr(){Gi=it.filter(t=>t.collideSolidObjects);const e=t=>{if(!t.destroyed){t.update();for(const s of t.children)e(s)}};for(const t of it)t.parent||e(t);it=it.filter(t=>!t.destroyed),q=++Or/$s}const Nr=e=>G=e,Ur=e=>ve=e,Xi=e=>Qt=e,jr=e=>Cs=e,Fr=e=>ee=e,Hr=e=>xi=e;class Is extends Dt{constructor(t){super(d(0,1.25),d(4,.5)),this.levelSize=t,this.color=new m(1,1,1,.5),this.setCollision(!0),this.mass=0}update(){const t=this.size.x*.5,s=this.levelSize.x-t;this.pos.x=R(gt.x,t,s)}increaseSize(){this.size.x+=2}decreaseSize(){this.size.x-=2,this.size.x<2&&(this.size.x=2)}resetSize(){this.size.x=4}}class Te extends Dt{constructor(t,s){super(t,s),this.setCollision(!0),this.mass=0,this.color=new m().setHex("#494746")}}const j=d(38,20),Wr=(e,t)=>e===t,Be=Symbol("solid-proxy"),Vr=Symbol("solid-track"),Oe={equals:Wr};let Ki=Qi;const yt=1,ze=2,Yi={owned:null,cleanups:null,context:null,owner:null};var z=null;let ts=null,B=null,V=null,dt=null,Ve=0;function Ee(e,t){const s=B,i=z,r=e.length===0,n=t===void 0?i:t,a=r?Yi:{owned:null,cleanups:null,context:n?n.context:null,owner:n},o=r?e:()=>e(()=>At(()=>Ge(a)));z=a,B=null;try{return ce(o,!0)}finally{B=s,z=i}}function N(e,t){t=t?Object.assign({},Oe,t):Oe;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=r=>(typeof r=="function"&&(r=r(s.value)),Ji(s,r));return[Zi.bind(s),i]}function F(e,t,s){const i=Bs(e,t,!1,yt);le(i)}function qi(e,t,s){Ki=Yr;const i=Bs(e,t,!1,yt);(!s||!s.render)&&(i.user=!0),dt?dt.push(i):le(i)}function ne(e,t,s){s=s?Object.assign({},Oe,s):Oe;const i=Bs(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=s.equals||void 0,le(i),Zi.bind(i)}function At(e){if(B===null)return e();const t=B;B=null;try{return e()}finally{B=t}}function Gr(e){return z===null||(z.cleanups===null?z.cleanups=[e]:z.cleanups.push(e)),e}function Zi(){if(this.sources&&this.state)if(this.state===yt)le(this);else{const e=V;V=null,ce(()=>Re(this),!1),V=e}if(B){const e=this.observers?this.observers.length:0;B.sources?(B.sources.push(this),B.sourceSlots.push(e)):(B.sources=[this],B.sourceSlots=[e]),this.observers?(this.observers.push(B),this.observerSlots.push(B.sources.length-1)):(this.observers=[B],this.observerSlots=[B.sources.length-1])}return this.value}function Ji(e,t,s){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&ce(()=>{for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r],a=ts&&ts.running;a&&ts.disposed.has(n),(a?!n.tState:!n.state)&&(n.pure?V.push(n):dt.push(n),n.observers&&tn(n)),a||(n.state=yt)}if(V.length>1e6)throw V=[],new Error},!1)),t}function le(e){if(!e.fn)return;Ge(e);const t=z,s=B,i=Ve;B=z=e,Xr(e,e.value,i),B=s,z=t}function Xr(e,t,s){let i;try{i=e.fn(t)}catch(r){return e.pure&&(e.state=yt,e.owned&&e.owned.forEach(Ge),e.owned=null),e.updatedAt=s+1,en(r)}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?Ji(e,i):e.value=i,e.updatedAt=s)}function Bs(e,t,s,i=yt,r){const n={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:z,context:z?z.context:null,pure:s};return z===null||z!==Yi&&(z.owned?z.owned.push(n):z.owned=[n]),n}function Le(e){if(e.state===0)return;if(e.state===ze)return Re(e);if(e.suspense&&At(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ve);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===yt)le(e);else if(e.state===ze){const i=V;V=null,ce(()=>Re(e,t[0]),!1),V=i}}function ce(e,t){if(V)return e();let s=!1;t||(V=[]),dt?s=!0:dt=[],Ve++;try{const i=e();return Kr(s),i}catch(i){s||(dt=null),V=null,en(i)}}function Kr(e){if(V&&(Qi(V),V=null),e)return;const t=dt;dt=null,t.length&&ce(()=>Ki(t),!1)}function Qi(e){for(let t=0;t<e.length;t++)Le(e[t])}function Yr(e){let t,s=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[s++]=i:Le(i)}for(t=0;t<s;t++)Le(e[t])}function Re(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const i=e.sources[s];if(i.sources){const r=i.state;r===yt?i!==t&&(!i.updatedAt||i.updatedAt<Ve)&&Le(i):r===ze&&Re(i,t)}}}function tn(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=ze,s.pure?V.push(s):dt.push(s),s.observers&&tn(s))}}function Ge(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),i=e.sourceSlots.pop(),r=s.observers;if(r&&r.length){const n=r.pop(),a=s.observerSlots.pop();i<r.length&&(n.sourceSlots[a]=i,r[i]=n,s.observerSlots[i]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ge(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function qr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function en(e,t=z){throw qr(e)}const Zr=Symbol("fallback");function ui(e){for(let t=0;t<e.length;t++)e[t]()}function Jr(e,t,s={}){let i=[],r=[],n=[],a=0,o=t.length>1?[]:null;return Gr(()=>ui(n)),()=>{let l=e()||[],h,c;return l[Vr],At(()=>{let f=l.length,b,w,_,D,k,C,O,A,tt;if(f===0)a!==0&&(ui(n),n=[],i=[],r=[],a=0,o&&(o=[])),s.fallback&&(i=[Zr],r[0]=Ee(wt=>(n[0]=wt,s.fallback())),a=1);else if(a===0){for(r=new Array(f),c=0;c<f;c++)i[c]=l[c],r[c]=Ee(u);a=f}else{for(_=new Array(f),D=new Array(f),o&&(k=new Array(f)),C=0,O=Math.min(a,f);C<O&&i[C]===l[C];C++);for(O=a-1,A=f-1;O>=C&&A>=C&&i[O]===l[A];O--,A--)_[A]=r[O],D[A]=n[O],o&&(k[A]=o[O]);for(b=new Map,w=new Array(A+1),c=A;c>=C;c--)tt=l[c],h=b.get(tt),w[c]=h===void 0?-1:h,b.set(tt,c);for(h=C;h<=O;h++)tt=i[h],c=b.get(tt),c!==void 0&&c!==-1?(_[c]=r[h],D[c]=n[h],o&&(k[c]=o[h]),c=w[c],b.set(tt,c)):n[h]();for(c=C;c<f;c++)c in _?(r[c]=_[c],n[c]=D[c],o&&(o[c]=k[c],o[c](c))):r[c]=Ee(u);r=r.slice(0,a=f),i=l.slice(0)}return r});function u(f){if(n[c]=f,o){const[b,w]=N(c);return o[c]=w,t(l[c],b)}return t(l[c])}}}function P(e,t){return At(()=>e(t||{}))}function Se(){return!0}const gs={get(e,t,s){return t===Be?s:e.get(t)},has(e,t){return t===Be?!0:e.has(t)},set:Se,deleteProperty:Se,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Se,deleteProperty:Se}},ownKeys(e){return e.keys()}};function es(e){return(e=typeof e=="function"?e():e)?e:{}}function Qr(){for(let e=0,t=this.length;e<t;++e){const s=this[e]();if(s!==void 0)return s}}function di(...e){let t=!1;for(let n=0;n<e.length;n++){const a=e[n];t=t||!!a&&Be in a,e[n]=typeof a=="function"?(t=!0,ne(a)):a}if(t)return new Proxy({get(n){for(let a=e.length-1;a>=0;a--){const o=es(e[a])[n];if(o!==void 0)return o}},has(n){for(let a=e.length-1;a>=0;a--)if(n in es(e[a]))return!0;return!1},keys(){const n=[];for(let a=0;a<e.length;a++)n.push(...Object.keys(es(e[a])));return[...new Set(n)]}},gs);const s={},i={},r=new Set;for(let n=e.length-1;n>=0;n--){const a=e[n];if(!a)continue;const o=Object.getOwnPropertyNames(a);for(let l=0,h=o.length;l<h;l++){const c=o[l];if(c==="__proto__"||c==="constructor")continue;const u=Object.getOwnPropertyDescriptor(a,c);if(!r.has(c))u.get?(r.add(c),Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:Qr.bind(i[c]=[u.get.bind(a)])})):(u.value!==void 0&&r.add(c),s[c]=u.value);else{const f=i[c];f?u.get?f.push(u.get.bind(a)):u.value!==void 0&&f.push(()=>u.value):s[c]===void 0&&(s[c]=u.value)}}}return s}function t0(e,...t){if(Be in e){const r=new Set(t.length>1?t.flat():t[0]),n=t.map(a=>new Proxy({get(o){return a.includes(o)?e[o]:void 0},has(o){return a.includes(o)&&o in e},keys(){return a.filter(o=>o in e)}},gs));return n.push(new Proxy({get(a){return r.has(a)?void 0:e[a]},has(a){return r.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!r.has(a))}},gs)),n}const s={},i=t.map(()=>({}));for(const r of Object.getOwnPropertyNames(e)){const n=Object.getOwnPropertyDescriptor(e,r),a=!n.get&&!n.set&&n.enumerable&&n.writable&&n.configurable;let o=!1,l=0;for(const h of t)h.includes(r)&&(o=!0,a?i[l][r]=n.value:Object.defineProperty(i[l],r,n)),++l;o||(a?s[r]=n.value:Object.defineProperty(s,r,n))}return[...i,s]}const e0=e=>`Stale read from <${e}>.`;function sn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ne(Jr(()=>e.each,e.children,t||void 0))}function Os(e){const t=e.keyed,s=ne(()=>e.when,void 0,{equals:(i,r)=>t?i===r:!i==!r});return ne(()=>{const i=s();if(i){const r=e.children;return typeof r=="function"&&r.length>0?At(()=>r(t?i:()=>{if(!At(s))throw e0("Show");return e.when})):r}return e.fallback},void 0,void 0)}var Et=(e=>(e[e.Empty=0]="Empty",e[e.Normal=1]="Normal",e[e.Hard=2]="Hard",e[e.Unbreakable=3]="Unbreakable",e))(Et||{}),nn={exports:{}};function zs(){}zs.prototype={on:function(e,t,s){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:s}),this},once:function(e,t,s){var i=this;function r(){i.off(e,r),t.apply(s,arguments)}return r._=t,this.on(e,r,s)},emit:function(e){var t=[].slice.call(arguments,1),s=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=s.length;for(i;i<r;i++)s[i].fn.apply(s[i].ctx,t);return this},off:function(e,t){var s=this.e||(this.e={}),i=s[e],r=[];if(i&&t)for(var n=0,a=i.length;n<a;n++)i[n].fn!==t&&i[n].fn._!==t&&r.push(i[n]);return r.length?s[e]=r:delete s[e],this}};nn.exports=zs;var s0=nn.exports.TinyEmitter=zs;const S=new s0;class M{constructor(t,s){g(this,"offsetX",0);g(this,"offsetY",10);g(this,"blockWidth",2);g(this,"blockHeight",1);g(this,"count");g(this,"coords");g(this,"key");this.name=t,this.map=s,this.map=s.reverse(),this.count=this.countBricks(),this.coords=this.calcCoords(),this.key=`Stage:${this.name}`}getMap(){return this.map}getBrickCount(){return this.count}brickCountEquals(t){return this.count===t.getValue()}getCoords(){return this.coords}countBricks(){return this.map.reduce((t,s)=>t+s.reduce((i,r)=>i+(r===1?1:0),0),0)}calcCoords(){const t=[];for(const[s,i]of this.map.entries())for(const[r,n]of i.entries())n!==Et.Empty&&t.push([n,d(r*this.blockWidth+this.offsetX,s*this.blockHeight+this.offsetY)]);return t}isUnlocked(){return localStorage.getItem(this.key)==="unlocked"}unlock(t){localStorage.setItem(this.key,"unlocked"),S.emit("stage-unlocked",this.name,t)}}const rn=[new class extends M{constructor(){super("01",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0],[0,1,0,0,0,1,1,1,3,1,3,1,1,1,1,0,0,0,1,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),this.unlock(0)}},new class extends M{constructor(){super("02",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,3,0,3,0,3,0,3,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),this.unlock(1)}},new class extends M{constructor(){super("03",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,3,0,1,0,3,0,1,0,1,0,1,0,3,0,1,0,3,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),this.unlock(2)}},new class extends M{constructor(){super("04",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0]])}},new class extends M{constructor(){super("05",[[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,3,0,1,0,3,0,1,3,3,1,0,3,0,1,0,3,0,0],[0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0],[0,0,3,0,1,0,3,0,1,3,3,1,0,3,0,1,0,3,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("06",[[0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0],[0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0],[0,0,3,0,1,0,3,0,1,3,3,1,0,3,0,1,0,3,3,0],[0,0,3,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,3,0],[0,0,3,0,1,0,3,0,1,3,3,1,0,3,0,1,0,3,0,0],[0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0],[0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("07",[[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,3,0,1,0,3,0,1,3,3,1,0,3,0,1,0,3,0,0],[0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0],[0,0,3,0,1,0,3,0,1,3,3,1,0,3,0,1,0,3,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("08",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,3,3,1,0,0,0,0,0,1,3,3,0,0,0,0],[0,0,0,0,1,1,1,1,1,0,0,0,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,3,1,1,1,0,1,1,1,3,1,1,1,0,0],[0,0,1,1,1,1,3,3,1,1,0,1,1,1,3,3,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("09",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,3,3,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,3,3,3,1,3,3,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0]])}},new class extends M{constructor(){super("10",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("11",[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],[3,1,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,3],[3,1,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,1,3],[3,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("12",[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],[3,1,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,3],[3,1,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,1,3],[3,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,3],[3,3,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,3,3],[0,3,3,3,0,0,0,0,1,0,1,0,0,0,0,0,3,3,3,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("13",[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],[3,1,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,3],[3,1,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,1,3],[3,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,3],[3,3,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0,3,3,3],[3,3,3,3,3,3,0,0,1,0,1,0,0,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("14",[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],[3,1,3,1,3,1,0,0,0,0,0,0,0,0,1,3,1,3,1,3],[3,1,3,3,3,1,1,1,0,0,0,0,1,1,1,3,3,3,1,3],[3,3,3,3,3,0,0,1,1,1,1,1,1,0,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("15",[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],[3,1,0,1,0,1,0,0,1,1,1,1,0,0,1,0,1,0,1,3],[3,1,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,1,3],[3,0,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,0,3],[3,3,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0,3,3,3],[3,3,3,3,3,3,3,3,1,0,1,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("16",[[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0],[1,1,0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0,1,1],[1,0,0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,0,1],[1,0,0,1,1,1,1,1,0,1,1,0,0,1,1,1,1,0,0,1],[1,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]])}},new class extends M{constructor(){super("17",[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]])}},new class extends M{constructor(){super("18",[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,3,3,1,1,1,1,1,1,3,1,1,1,3],[3,1,3,1,3,1,3,3,3,1,3,1,3,1,3,3,3,1,3,3],[3,1,1,3,1,3,1,3,3,1,1,3,1,3,1,3,3,1,1,3],[3,3,1,1,3,1,3,1,3,1,1,1,3,1,3,1,3,1,3,3],[3,3,3,1,1,3,1,3,1,3,3,1,1,3,1,3,1,3,3,3],[3,3,1,3,3,1,3,1,3,1,1,3,1,1,3,1,3,1,3,3],[3,1,3,3,1,3,1,3,3,1,3,1,3,1,3,1,3,1,3,3],[3,1,1,1,3,1,3,3,3,1,3,1,3,1,1,1,3,1,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]])}},new class extends M{constructor(){super("19",[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,1,1,1,3],[3,3,1,1,1,1,1,3,3,1,3,3,3,3,3,1,1,1,3,3],[3,3,3,1,1,1,1,1,1,1,3,3,3,3,1,1,1,3,3,3],[3,3,3,3,1,3,3,1,1,1,3,3,3,1,1,1,3,3,3,3],[3,3,3,3,3,1,1,1,3,3,3,1,1,1,3,3,3,3,3,3],[3,3,3,3,3,3,1,3,3,3,3,1,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]])}},new class extends M{constructor(){super("20",[[1,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1],[1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3],[1,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1],[1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3],[1,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1],[1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3],[1,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1],[1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3],[1,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1],[1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3,1,3]])}}],i0=new class extends M{constructor(){super("bonus",[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0]])}},[Ft,Lt]=N(L.Modern),[Xe,an]=N(0),[re,on]=N(!0),[Ne,ln]=N(!1),[Ls,cn]=N(!0),[hn,St]=N(0),[un,ps]=N(0),[ae,ms]=N(!1),[Rs,dn]=N(0),[fn,ys]=N(!1),[gn,bs]=N(!1),[pn,ws]=N(!1),[Ns,Us]=N(0),[js,mn]=N(rn.map(e=>({name:e.name,unlocked:e.isUnlocked()}))),xs=(e,t)=>{const s=js();s[t].unlocked=!0,mn(s.map(i=>Object.assign({},i)))},yn=Object.freeze(Object.defineProperty({__proto__:null,adRewardDisabled:ae,adRewardTimeLeft:Rs,bonusLevelCounter:Ns,extraLifeDialogShown:pn,gameOverDialogShown:fn,gameWinDialogShown:gn,highScore:un,mode:Ft,music:Ls,postProcessing:Ne,score:hn,setAdRewardDisabled:ms,setAdRewardTimeLeft:dn,setBonusLevelCounter:Us,setExtraLifeDialogShown:ws,setGameOverDialogShown:ys,setGameWinDialogShown:bs,setHighScore:ps,setMode:Lt,setMusic:cn,setPostProcessing:ln,setScore:St,setSound:on,setStage:an,setStagesUnlocked:mn,sound:re,stage:Xe,stagesUnlocked:js,unlockStage:xs},Symbol.toStringTag,{value:"Module"}));class n0{constructor(t,s){g(this,"prefix","Breakout-");this.key=t,this.defaultValue=s,this.set(this.get())}get(){const t=localStorage.getItem(this.prefix+this.key);return t||this.defaultValue}toString(){return Number(this.get())}toValue(){return Number(this.get())}set(t){localStorage.setItem(this.prefix+this.key,String(t))}reset(){this.set(this.defaultValue)}}class Ke{constructor(t,s=0,i=9){g(this,"value");this.initialValue=t,this.MIN=s,this.MAX=i,this.value=this.apply(t)}decrement(){this.value=this.apply(--this.value)}increment(){this.value=this.apply(++this.value)}restore(){this.value=this.initialValue}add(t){this.value+=t,this.value=this.apply(this.value)}sub(t){this.value-=t,this.value=this.apply(this.value)}getValue(){return this.value}hasValue(){return this.value>0}setMax(){this.value=this.MAX}setMin(){this.value=this.MIN}setVal(t){this.value=this.apply(t)}apply(t){return Math.min(Math.max(t,this.MIN),this.MAX)}}class r0{constructor(t){g(this,"score");g(this,"highScore");this.initialValue=t,this.score=new Ke(t,0,1e16),this.highScore=new n0("highScore",0),ps(this.highScore.toValue()),St(this.score.getValue())}increment(){this.score.increment(),St(this.score.getValue()),this.evaluateHighScore()}decrement(){this.score.decrement(),St(this.score.getValue),this.evaluateHighScore()}add(t){this.score.add(t),St(this.score.getValue()),this.evaluateHighScore()}double(){this.score.setVal(this.score.getValue()*2),St(this.score.getValue()),this.evaluateHighScore()}reset(){this.score.restore(),St(this.initialValue)}toString(){return this.score.toString()}toValue(){return this.score.getValue()}getHighScore(){return this.highScore}evaluateHighScore(){this.score.getValue()>this.highScore.toValue()&&(this.highScore.set(this.score.getValue()),ps(this.score.getValue()))}}const a0=""+new URL("tiles-75ceaa43.png",import.meta.url).href,bn={enabled(){return window.location.hash.includes("debug")},disabled(){return!this.enabled()}};var E=(e=>(e[e.ExtraScore=0]="ExtraScore",e[e.ExtraBalls=1]="ExtraBalls",e[e.PaddleIncrease=2]="PaddleIncrease",e[e.ExtraLife=3]="ExtraLife",e[e.ExtraWall=4]="ExtraWall",e[e.PaddleDecrease=5]="PaddleDecrease",e[e.DoubleBalls=6]="DoubleBalls",e[e.TripleBalls=7]="TripleBalls",e[e.ExtraStrength=8]="ExtraStrength",e))(E||{});class bt{constructor(t){g(this,"timers",[]);g(this,"timeout",1e4);this.game=t}clearTimers(){this.timers.forEach(clearTimeout)}}let fi=class extends bt{constructor(t){super(t)}apply(){if(this.game.balls.hasValue()){const t=this.game.balls.getOne();if(!t||t.destroyed)return;this.game.balls.spawnManyAt(G,3)}}};class o0 extends bt{constructor(t){super(t)}apply(){this.game.lives.increment()}}class l0 extends bt{constructor(t){super(t)}apply(){var t;(t=this.game.paddle)==null||t.increaseSize(),this.timers.push(setTimeout(()=>{var s;(s=this.game.paddle)==null||s.decreaseSize()},this.timeout))}}class c0 extends bt{constructor(t){super(t)}apply(){var t;(t=this.game.paddle)==null||t.decreaseSize(),this.timers.push(setTimeout(()=>{var s;(s=this.game.paddle)==null||s.increaseSize()},this.timeout))}}class h0 extends bt{constructor(t){super(t)}apply(){this.game.score.add(10)}}class u0 extends bt{constructor(s){super(s);g(this,"size",d(j.x,.25));g(this,"position",d(j.x*.5,.14))}apply(){var s;(s=this.game.floor)==null||s.destroy(),this.game.floor=new Te(this.position,this.size),this.game.floor.color=new m(1,1,1,.5),this.timers.push(setTimeout(()=>{var i;(i=this.game.floor)==null||i.destroy(),this.game.floor=null},this.timeout))}}class d0 extends bt{constructor(t){super(t)}apply(){this.game.balls.hasValue()&&this.game.balls.double()}}class f0 extends bt{constructor(t){super(t)}apply(){this.game.balls.hasValue()&&this.game.balls.triple()}}const wn=[[6,1],[5,10],[16,11],[12,7],[15,20],[17,0],[26,21],[2,27],[31,30]],g0=22,p0=new m().setHex("#486370"),Ue=[new m().setHex("#00854A"),new m().setHex("#8CC63F"),new m().setHex("#FFDD00"),new m().setHex("#ED1B25"),new m().setHex("#91278F"),new m().setHex("#005AAB"),new m().setHex("#00AAE5"),new m().setHex("#F7931F"),new m().setHex("#744C1F")];if(Ue.length!==wn.length)throw new Error("Colors and Tiles must have the same length");class m0 extends Dt{constructor(s,i){super(s,d(.5));g(this,"type");g(this,"sign",1);g(this,"stopped",!1);g(this,"oldVelocity",d(0));this.type=i,this.setCollision(!0),this.velocity=d(0,-.1),this.color=Ue[this.type],this.sign=Wt(0,1)===0?-1:1}getType(){return this.type}update(){this.stopped||(this.angle+=this.sign*.3,this.pos.y<0&&this.destroy(),super.update())}collideWithObject(s){return s instanceof Is&&(S.emit("bonusCollected",this),this.destroy()),!1}stopMovement(){this.stopped=!0,this.oldVelocity=this.velocity,this.velocity=d(0)}resumeMovement(){this.stopped=!1,this.velocity=this.oldVelocity}}class y0{constructor(t,s=null){this.value=t,this.next=s}}class he{constructor(){g(this,"head");g(this,"tail");g(this,"length");this.head=null,this.tail=null,this.length=0}add(t){const s=new y0(t);if(this.head===null){this.head=s,this.tail=s,this.length++;return}this.tail===null&&(this.tail=s),this.tail.next=s,this.tail=s,this.length++}remove(t){if(this.head===null)return;if(this.head.value===t){this.head=this.head.next,this.head===null&&(this.tail=null),this.length--;return}let s=this.head;for(;s.next!==null;){if(s.next.value===t){s.next=s.next.next,s.next===null&&(this.tail=s),this.length--;return}s=s.next}}has(t){if(this.head===null)return!1;let s=this.head;for(;s!==null;){if(s.value===t)return!0;s=s.next}return!1}*[Symbol.iterator](){if(this.head===null)return;let t=this.head;for(;t!==null;)yield t.value,t=t.next}toArray(){const t=[];let s=this.head;for(;s!==null;)t.push(s.value),s=s.next;return t}getLength(){return this.length}isEmpty(){return this.length===0}peek(){var t;return(t=this.head)==null?void 0:t.value}clear(){this.head=null,this.tail=null,this.length=0}}class b0{constructor(t){g(this,"commands");g(this,"bonuses",new he);this.commands={[E.ExtraBalls]:new fi(t),[E.ExtraLife]:new o0(t),[E.PaddleIncrease]:new l0(t),[E.PaddleDecrease]:new c0(t),[E.ExtraScore]:new h0(t),[E.ExtraWall]:new u0(t),[E.DoubleBalls]:new d0(t),[E.TripleBalls]:new f0(t),[E.ExtraStrength]:new fi(t)}}collect(t){this.commands[t.getType()].apply();for(const s of this.bonuses)s.destroyed&&this.bonuses.remove(s)}produce(t){this.bonuses.add(new m0(d(Wt(2,j.x-2),j.y-2),t))}clearTimers(){for(const t of Object.values(this.commands))t.clearTimers()}destroy(){this.clearTimers();for(const t of this.bonuses)t.destroy(),this.bonuses.remove(t)}stop(){for(const t of this.bonuses)t.stopMovement()}resume(){for(const t of this.bonuses)t.resumeMovement()}}class w0{constructor(t){g(this,"game");g(this,"stages");g(this,"index",0);g(this,"currentStage");this.game=t,this.stages=rn,this.currentStage=this.stages[this.index]}get current(){return this.currentStage}showClickToStartText(){new Je().drawText("Click to Start",G.add(d(0,-5)),.1,!0)}showCurrentStageText(){const t=this.game.mode.isBonus()?"Bonus Stage":`Stage ${this.currentStage.name}`;new Je().drawText(t,G.add(d(0,0)),.2,!0)}showCounterText(){const t=[];t.push(`Score: ${String(this.game.score.toValue()).padStart(4,"0")}`),t.push(`Lives: ${String(this.game.lives.getValue()).padStart(2,"0")}`),this.game.mode.isBonus()||t.push(`Stage: ${String(this.game.stage.currentStage.name).padStart(2,"0")}`),t.push(`Mode: ${this.game.mode.toString()}`),t.push(`High-Score: ${String(this.game.score.getHighScore()).padStart(6,"0")}`),this.game.mode.isBonus()&&t.push(`Ends: ${String(Ns()).padStart(2,"0")}`),new Je().drawText(t.join(" | "),d(j.x*.5,j.y+.5),.07,!0)}execute(t){this.index=t,this.currentStage=this.stages[this.index]}next(){this.game.mode.toggleBonus(),this.game.mode.isBonus()?this.currentStage=i0:(this.index=Math.min(this.index+1,this.stages.length-1),this.currentStage=this.stages[this.index],this.currentStage.isUnlocked()||this.currentStage.unlock(this.index)),this.start()}start(){this.game.bricks.destroy(),this.game.bricks.populate()}restart(){this.game.bricks.destroy(),this.game.bricks.populate()}isCleared(){return this.currentStage.brickCountEquals(this.game.bricks.destroyed)}}class x0 extends Ke{runOut(){return!this.hasValue()}}class Fs{constructor(t){g(this,"probabilities",[]);t&&this.setProbabilities(t)}setProbabilities(t){this.probabilities=t,this.assertProbabilitiesSumUpToOne()}pick(){this.assertProbabilitiesSumUpToOne();const t=Math.random();let s=0;for(const[i,r]of this.probabilities)if(s+=r/100,t<=s)return i;throw new Error("Failed to pick a number based on probabilities.")}*[Symbol.iterator](){for(const[t]of this.probabilities)yield t}assertProbabilitiesSumUpToOne(){if(this.probabilities.length===0)throw new Error("Probabilities should not be empty.");const t=this.probabilities.reduce((s,[,i])=>s+i,0);if(t!==100)throw new Error(`Probabilities should sum up to 100. Sum is ${t}.`)}}class Hs extends Dt{constructor(s,i=d(2,1)){super(s,i);g(this,"strength",1);g(this,"hitCount",0);g(this,"tiles");g(this,"index",0);g(this,"picker");this.picker=new Fs([[Et.Normal,70],[Et.Hard,30]]),this.mass=0,this.angle=0,this.setCollision(!0),this.strength=this.picker.pick(),this.index=Wt(0,Ue.length),this.tiles=this.getTileByIndex(this.index),this.color=this.getColorByIndex(this.index),this.tileIndex=this.tiles[this.hitCount],this.tileSize=d(384,128),this.renderOrder=-1}get score(){return this.strength}getStrength(){return this.strength}setStrength(s){this.strength=s}increaseHitCount(){this.tileIndex=this.tiles[++this.hitCount],this.angle=I(-.3,.3)}shallBeDestroyed(){return this.hitCount>=this.strength}getColorByIndex(s){return Ue[s]}getTileByIndex(s){return wn[s]}}S.on("sound",()=>{Xi(re()),console.info("Sound is",re()?"enabled":"disabled")});S.emit("music",()=>{console.info("Music is",Ls()?"enabled":"disabled")});const ke={GameStart:new be([,0,500,,.04,.3,1,2,,,570,.02,.02,,,,.04]),BallBounce:new be([,,119,.02,.01,.02,,.26,,.5,,,,,-381,,,,.01,.8]),BrickHit:new be([,,141,,,.02,1,0,,,,,,.5,70,,,,.01]),BrickDestroy:new be([1.37,,574,.04,.27,.3,2,2.9,.6,-.1,,,.13,1.8,,.3,,.25,.01])},gi={BallDestroy:(e,t)=>new ri(e,0,0,.1,500,3.14,-1,d(8,8),t,t,t.scale(1,0),t.scale(1,0),.2,.1,.45,.1,.05,.98,1,0,3.14,.1,1,!1,!1,!0),BrickHit:(e,t)=>new ri(e,0,0,.1,50,.45,4,d(10,10),t,t,t.scale(1,0),t.scale(1,0),.2,.1,.45,.39,.05,.98,1,0,1,.1,.99,!0,!0,!1)};class Ws extends Ke{constructor(t){super(t)}static getColor(t){return t===0?new m().setHex("#ffffff"):t===1?new m().setHex("#ffffff"):t===2?new m().setHex("#ffd0d0"):t===3?new m().setHex("#ffb0b0"):t===4?new m().setHex("#ff9090"):t===5?new m().setHex("#ff7070"):t===6?new m().setHex("#ff5050"):t===7?new m().setHex("#ff3030"):t===8?new m().setHex("#ff1010"):new m().setHex("#ff0000")}getColor(){return Ws.getColor(this.value)}}class S0 extends Dt{constructor(s,i=1){super(s,d(.25));g(this,"strength");g(this,"stopped",!1);g(this,"oldVelocity",d(0));this.strength=new Ws(i);const r=Wt(0,2)===0?-1:1;this.velocity=d(.1*r,-.1),this.setCollision(!0),this.elasticity=1}collideWithObject(s){const i=s instanceof Hs,r=s instanceof Is;return i?this.handleBrickCollision(s):r?this.handlePaddleCollision(s):!0}update(){if(!this.stopped)return this.angleVelocity=this.velocity.length()*10,this.color=this.strength.getColor(),super.update()}stopMovement(){this.stopped=!0,this.oldVelocity=this.velocity,this.velocity=d(0)}resumeMovement(){this.stopped=!1,this.velocity=this.oldVelocity}handleBrickCollision(s){this.strength.sub(s.getStrength());const{color:i}=s;return ke.BrickHit.play(this.pos),s.increaseHitCount(),s.shallBeDestroyed()?(gi.BallDestroy(this.pos,i),ke.BrickDestroy.play(this.pos),S.emit("brickDestroyed",s),s.destroy()):gi.BrickHit(this.pos,i),!this.strength.hasValue()}handlePaddleCollision(s){this.strength.restore();const i=this.velocity.length()+.5;ke.BallBounce.play(this.pos,1,i);const r=this.pos.x-s.pos.x;this.velocity=this.velocity.rotate(r*.3),this.velocity.y=at(this.velocity.y,.3);const n=nt(1.04*this.velocity.length(),.5);return this.velocity=this.velocity.normalize().scale(n),!1}}class v0{constructor(){g(this,"MAX_BALLS",200);g(this,"balls");g(this,"picker");g(this,"strength",1);this.balls=new he,this.picker=new Fs([[-.5,50],[.5,50]])}add(t){this.balls.add(t)}setStrength(t){this.strength=t}remove(t){this.balls.remove(t)}spawnOneAt(t=G){if(this.balls.getLength()<this.MAX_BALLS){const s=this.picker.pick(),i=this.picker.pick();this.add(new S0(d(t.x+s,t.y+i),this.strength))}}spawnManyAt(t=G,s=1){for(let i=0;i<s;i++)this.spawnOneAt(t)}double(){for(const t of this.balls.toArray())this.spawnOneAt(t.pos)}triple(){for(const t of this.balls.toArray())this.spawnManyAt(t.pos,2)}hasValue(){return!this.balls.isEmpty()}escaped(){return this.balls.isEmpty()}getOne(){return this.balls.peek()}update(){for(const t of this.balls)t.pos.y<-1&&t.destroy(),t.destroyed&&this.balls.remove(t)}*[Symbol.iterator](){for(const t of this.balls)yield t}destroy(){for(const t of this.balls)t.destroy();this.balls.clear()}stop(){for(const t of this.balls)t.stopMovement()}resume(){for(const t of this.balls)t.resumeMovement()}}let ue=class{constructor(t){g(this,"bonusPicker",new Fs);g(this,"timers",[]);this.game=t}async update(){}pickBonus(){return this.bonusPicker.pick()}clearTimers(){this.timers.forEach(clearTimeout)}};var kt=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return this.None(e)},Out:function(e){return this.None(e)},InOut:function(e){return this.None(e)}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var t=1.70158;return e===1?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return e===0?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-kt.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?kt.Bounce.In(e*2)*.5:kt.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(t*2,e)/2:(1-Math.pow(2-t*2,e))/2+.5}}}}),qt=function(){return performance.now()},_0=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(s){return t._tweens[s]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},e.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},e.prototype.update=function(t,s){t===void 0&&(t=qt()),s===void 0&&(s=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var n=this._tweens[i[r]],a=!s;n&&n.update(t,a)===!1&&!s&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),Rt={Linear:function(e,t){var s=e.length-1,i=s*t,r=Math.floor(i),n=Rt.Utils.Linear;return t<0?n(e[0],e[1],i):t>1?n(e[s],e[s-1],s-i):n(e[r],e[r+1>s?s:r+1],i-r)},Bezier:function(e,t){for(var s=0,i=e.length-1,r=Math.pow,n=Rt.Utils.Bernstein,a=0;a<=i;a++)s+=r(1-t,i-a)*r(t,a)*e[a]*n(i,a);return s},CatmullRom:function(e,t){var s=e.length-1,i=s*t,r=Math.floor(i),n=Rt.Utils.CatmullRom;return e[0]===e[s]?(t<0&&(r=Math.floor(i=s*(1+t))),n(e[(r-1+s)%s],e[r],e[(r+1)%s],e[(r+2)%s],i-r)):t<0?e[0]-(n(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[s]-(n(e[s],e[s],e[s-1],e[s-1],i-s)-e[s]):n(e[r?r-1:0],e[r],e[s<r+1?s:r+1],e[s<r+2?s:r+2],i-r)},Utils:{Linear:function(e,t,s){return(t-e)*s+e},Bernstein:function(e,t){var s=Rt.Utils.Factorial;return s(e)/s(t)/s(e-t)},Factorial:function(){var e=[1];return function(t){var s=1;if(e[t])return e[t];for(var i=t;i>1;i--)s*=i;return e[t]=s,s}}(),CatmullRom:function(e,t,s,i,r){var n=(s-e)*.5,a=(i-t)*.5,o=r*r,l=r*o;return(2*t-2*s+n+a)*l+(-3*t+3*s-2*n-a)*o+n*r+t}}},C0=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),Ss=new _0,xn=function(){function e(t,s){s===void 0&&(s=Ss),this._object=t,this._group=s,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=kt.Linear.None,this._interpolationFunction=Rt.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=C0.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(t,s){if(s===void 0&&(s=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=s,this},e.prototype.duration=function(t){return t===void 0&&(t=1e3),this._duration=t,this},e.prototype.dynamic=function(t){return t===void 0&&(t=!1),this._isDynamic=t,this},e.prototype.start=function(t,s){if(t===void 0&&(t=qt()),s===void 0&&(s=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||s){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var n in this._valuesEnd)r[n]=this._valuesEnd[n];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,s)}return this},e.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},e.prototype._setupProperties=function(t,s,i,r,n){for(var a in i){var o=t[a],l=Array.isArray(o),h=l?"array":typeof o,c=!l&&Array.isArray(i[a]);if(!(h==="undefined"||h==="function")){if(c){var u=i[a];if(u.length===0)continue;for(var f=[o],b=0,w=u.length;b<w;b+=1){var _=this._handleRelativeValue(o,u[b]);if(isNaN(_)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(_)}c&&(i[a]=f)}if((h==="object"||l)&&o&&!c){s[a]=l?[]:{};var D=o;for(var k in D)s[a][k]=D[k];r[a]=l?[]:{};var u=i[a];if(!this._isDynamic){var C={};for(var k in u)C[k]=u[k];i[a]=u=C}this._setupProperties(D,s[a],u,r[a],n)}else(typeof s[a]>"u"||n)&&(s[a]=o),l||(s[a]*=1),c?r[a]=i[a].slice().reverse():r[a]=s[a]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(t){return t===void 0&&(t=qt()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},e.prototype.resume=function(t){return t===void 0&&(t=qt()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},e.prototype.stopChainedTweens=function(){for(var t=0,s=this._chainedTweens.length;t<s;t++)this._chainedTweens[t].stop();return this},e.prototype.group=function(t){return t===void 0&&(t=Ss),this._group=t,this},e.prototype.delay=function(t){return t===void 0&&(t=0),this._delayTime=t,this},e.prototype.repeat=function(t){return t===void 0&&(t=0),this._initialRepeat=t,this._repeat=t,this},e.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},e.prototype.yoyo=function(t){return t===void 0&&(t=!1),this._yoyo=t,this},e.prototype.easing=function(t){return t===void 0&&(t=kt.Linear.None),this._easingFunction=t,this},e.prototype.interpolation=function(t){return t===void 0&&(t=Rt.Linear),this._interpolationFunction=t,this},e.prototype.chain=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return this._chainedTweens=t,this},e.prototype.onStart=function(t){return this._onStartCallback=t,this},e.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},e.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},e.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},e.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},e.prototype.onStop=function(t){return this._onStopCallback=t,this},e.prototype.update=function(t,s){if(t===void 0&&(t=qt()),s===void 0&&(s=!0),this._isPaused)return!0;var i,r,n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>n)return!1;s&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=this._duration===0||r>1?1:r;var a=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),r===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,l=this._chainedTweens.length;o<l;o++)this._chainedTweens[o].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(t,s,i,r){for(var n in i)if(s[n]!==void 0){var a=s[n]||0,o=i[n],l=Array.isArray(t[n]),h=Array.isArray(o),c=!l&&h;c?t[n]=this._interpolationFunction(o,r):typeof o=="object"&&o?this._updateProperties(t[n],a,o,r):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(t[n]=a+(o-a)*r))}},e.prototype._handleRelativeValue=function(t,s){return typeof s!="string"?s:s.charAt(0)==="+"||s.charAt(0)==="-"?t+parseFloat(s):parseFloat(s)},e.prototype._swapEndStartRepeatValues=function(t){var s=this._valuesStartRepeat[t],i=this._valuesEnd[t];typeof i=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(i):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=s},e}(),ot=Ss;ot.getAll.bind(ot);ot.removeAll.bind(ot);ot.add.bind(ot);ot.remove.bind(ot);ot.update.bind(ot);class ss extends ue{constructor(s){super(s);g(this,"displayName","Dynamic");g(this,"timeout",1e4);g(this,"tweens",new he);this.bonusPicker.setProbabilities([[E.ExtraScore,20],[E.ExtraStrength,20],[E.PaddleIncrease,20],[E.PaddleDecrease,40]])}apply(){console.info("Dynamic mode activated"),this.game.balls.setStrength(2),this.tweens.clear(),this.clearTimers(),this.timers.push(setInterval(()=>{if(this.game.state.isStarted){this.tweens.clear();for(const s of this.game.bricks){const i=new xn(s.pos);i.to({y:s.pos.y-1},500),i.easing(kt.Bounce.Out),i.start(),this.tweens.add(i)}}},this.timeout))}async update(){await super.update();for(const s of this.tweens)s.update()}}class is extends ue{constructor(){super(...arguments);g(this,"displayName","Classic")}apply(){if(console.info("Classic mode activated"),this.game.bricks.areEmpty())throw new Error("No bricks to iterate");this.game.balls.setStrength(1);for(const s of this.game.bricks)s.setStrength(1)}}class ns extends ue{constructor(s){super(s);g(this,"displayName","Bonus");g(this,"timeout",3e3);g(this,"tweens",new he);this.bonusPicker.setProbabilities([[E.DoubleBalls,10],[E.TripleBalls,10],[E.ExtraBalls,30],[E.ExtraScore,30],[E.ExtraWall,20]])}apply(){console.info("Bonus mode activated"),Us(30),this.game.balls.setStrength(9),this.tweens.clear(),this.clearTimers(),this.timers.push(setInterval(()=>{if(this.game.state.isStarted)for(const s of this.game.bricks){const i=new xn(s.pos);i.to({y:s.pos.y-1},900),i.easing(kt.Bounce.Out),i.start(),this.tweens.add(i)}},this.timeout))}async update(){await super.update();for(const s of this.tweens)s.update()}}class rs extends ue{constructor(s){super(s);g(this,"displayName","Modern");this.bonusPicker.setProbabilities([[E.DoubleBalls,5],[E.TripleBalls,5],[E.ExtraBalls,15],[E.ExtraScore,15],[E.ExtraWall,10],[E.ExtraStrength,20],[E.PaddleDecrease,15],[E.PaddleIncrease,15]])}apply(){this.game.balls.setStrength(3),console.info("Modern mode activated")}}class T0 extends ue{constructor(){super(...arguments);g(this,"displayName","Empty")}apply(){}}class E0{constructor(t){g(this,"modes");g(this,"currentMode");g(this,"previousMode",null);this.modes={[L.Empty]:new T0(t),[L.Dynamic]:new ss(t),[L.Classic]:new is(t),[L.Bonus]:new ns(t),[L.Modern]:new rs(t)},this.currentMode=this.modes[L.Empty]}toString(){return this.currentMode.displayName}execute(t){this.clearTimers(),this.previousMode=this.currentMode,this.currentMode=this.modes[t],this.currentMode.apply()}async update(){await this.currentMode.update()}toggleBonus(){if(this.modeIsBonus())return this.restorePreviousMode();this.execute(L.Bonus),Lt(L.Bonus)}restorePreviousMode(){this.clearTimers(),this.previousMode&&(this.previousMode instanceof is?Lt(L.Classic):this.previousMode instanceof rs?Lt(L.Modern):this.previousMode instanceof ss&&Lt(L.Dynamic),this.currentMode=this.previousMode,this.currentMode.apply())}setDefault(){this.execute(L.Dynamic)}isDynamic(){return this.currentMode instanceof ss}isClassic(){return this.currentMode instanceof is}modeIsBonus(){return this.currentMode instanceof ns}isModern(){return this.currentMode instanceof rs}isBonus(){return this.currentMode instanceof ns}pickBonusType(){return this.currentMode.pickBonus()}clearTimers(){this.currentMode.clearTimers()}reApply(){this.currentMode.apply()}}class Q{constructor(t){this.game=t}async attach(){console.group(`${this.constructor.name} state`),console.debug("Attached")}async detach(){console.debug("Detached"),console.groupEnd()}update(t){}}class Sn extends Q{constructor(s){super(s);g(this,"timer",null);this.onBonusCollected=this.onBonusCollected.bind(this),this.onBrickDestroyed=this.onBrickDestroyed.bind(this)}async attach(){await super.attach(),this.game.mode.reApply(),this.startCountdown(),this.game.bonus.resume(),this.game.balls.resume(),S.on("bonusCollected",this.onBonusCollected),S.on("brickDestroyed",this.onBrickDestroyed),!this.game.balls.hasValue()&&this.game.lives.hasValue()&&(ke.GameStart.play(),this.game.balls.spawnOneAt(G))}async detach(){this.game.bonus.stop(),this.game.balls.stop(),this.game.mode.clearTimers(),this.stopCountdown(),S.off("bonusCollected",this.onBonusCollected),S.off("brickDestroyed",this.onBrickDestroyed),await super.detach()}async update(s){if(this.game.balls.update(),await this.evaluateBonusModeEnd(),this.game.balls.escaped())return this.game.mode.isBonus()?await this.game.state.changeTo("stageWinDialog"):(this.game.balls.destroy(),this.game.lives.decrement(),this.game.lives.runOut()?await this.game.state.changeTo("extraLifeDialog"):await this.game.state.changeTo("idle"));if(this.game.stage.isCleared())return await this.game.state.changeTo("stageWinDialog")}onBonusCollected(s){this.game.bonus.collect(s)}onBrickDestroyed(s){this.game.score.add(s.score),s.isBreakable&&this.game.bricks.destroyed.increment(),!this.game.mode.isClassic()&&this.game.score.toValue()%3===0&&this.game.bonus.produce(this.game.mode.pickBonusType())}async evaluateBonusModeEnd(){this.game.mode.modeIsBonus()&&Ns()<=0&&await this.game.state.changeTo("stageWinDialog")}startCountdown(){this.game.mode.modeIsBonus()&&(this.timer=setInterval(()=>{Us(s=>s-1)},1e3))}stopCountdown(){this.timer&&(clearInterval(this.timer),this.timer=null)}}class vn extends Q{}class _n extends Q{async attach(){await super.attach(),this.game.stage.restart(),this.game.balls.destroy(),this.game.bonus.destroy(),this.game.lives.restore()}async detach(){await super.detach()}async update(t){(Ts(0)||As(0))&&await this.game.state.changeTo("started"),this.game.stage.showCurrentStageText(),this.game.stage.showClickToStartText()}}class Cn extends Q{async attach(){await super.attach()}async detach(){await super.detach()}async update(t){(Ts(0)||As(0))&&await this.game.state.changeTo("started"),this.game.stage.showClickToStartText()}}class Tn extends Q{async attach(){await super.attach(),hi(!0);try{await this.game.ads.showRewardAd(),console.info("Ad finished"),await this.rewardPlayer(),await this.game.state.changeTo("idle")}catch(t){console.warn("Ad error",t),await this.game.state.changeTo("gameOver")}}async detach(){hi(!1),await super.detach()}async rewardPlayer(){this.game.lives.increment()}}let En=class extends Q{constructor(t){super(t),this.handleStartClick=this.handleStartClick.bind(this)}async attach(){await super.attach(),this.game.bonus.stop(),ys(!0),S.on("startClick",this.handleStartClick)}async detach(){ys(!1),S.off("startClick",this.handleStartClick),await super.detach()}async handleStartClick(){this.game.mode.execute(Ft()),this.game.stage.execute(Xe()),this.game.balls.destroy(),this.game.bonus.destroy(),this.game.bricks.destroy(),this.game.lives.restore(),this.game.bricks.populate(),this.game.state.previous.isExtraLifeDialog&&this.game.score.reset(),await this.game.state.changeTo("idle")}};class kn extends Q{constructor(t){super(t),this.handleDoubleWin=this.handleDoubleWin.bind(this),this.handleNextStage=this.handleNextStage.bind(this),this.handleRestart=this.handleRestart.bind(this)}async attach(){await super.attach(),je.isCrazyGames()&&await window.CrazyGames.SDK.game.happytime(),bs(!0),S.on("doubleWin",this.handleDoubleWin),S.on("nextStage",this.handleNextStage),S.on("restartStage",this.handleRestart)}async detach(){bs(!1),S.off("doubleWin",this.handleDoubleWin),S.off("nextStage",this.handleNextStage),S.off("restartStage",this.handleRestart),await super.detach()}async handleDoubleWin(){await this.game.state.changeTo("adBreakDoubleScore")}async handleNextStage(){await this.game.state.changeTo("nextStage")}async handleRestart(){await this.game.state.changeTo("restarted")}}class vs extends Q{}let An=class extends Q{constructor(t){super(t),this.handleGetExtraLife=this.handleGetExtraLife.bind(this)}async attach(){await super.attach(),ws(!0),S.on("getExtraLife",this.handleGetExtraLife)}async detach(){ws(!1),S.off("getExtraLife",this.handleGetExtraLife),await super.detach()}async handleGetExtraLife(t){if(t)return await this.game.state.changeTo("adBreakExtraLife");await this.game.state.changeTo("gameOver")}};class Pn extends Q{async attach(){await super.attach(),this.game.balls.destroy(),this.game.bonus.destroy(),this.game.stage.next()}async detach(){await super.detach()}async update(t){(Ts(0)||As(0))&&await this.game.state.changeTo("started"),this.game.stage.showCurrentStageText(),this.game.stage.showClickToStartText()}}class pi{constructor(t){this.state=t}get isPaused(){return this.state instanceof vn}get isStarted(){return this.state instanceof Sn}get isIdle(){return this.state instanceof Cn}get isGameOver(){return this.state instanceof En}get isAdBreak(){return this.state instanceof Tn}get isExtraLifeDialog(){return this.state instanceof An}get isStageWinDialog(){return this.state instanceof kn}get isNextStage(){return this.state instanceof Pn}get isRestarted(){return this.state instanceof _n}get isInitial(){return this.state instanceof vs}get value(){return this.state}set value(t){this.state=t}}class k0 extends Q{async attach(){await super.attach();try{await this.game.ads.showRewardAd(),console.info("Ad finished"),await this.rewardPlayer()}catch(t){console.warn("Ad error",t)}finally{await this.game.state.changeTo("nextStage")}}async detach(){await super.detach()}async rewardPlayer(){this.game.score.double()}}class A0 extends pi{constructor(s){super(new vs(s));g(this,"states");g(this,"previousState");this.states={initial:new vs(s),started:new Sn(s),paused:new vn(s),idle:new Cn(s),restarted:new _n(s),gameOver:new En(s),nextStage:new Pn(s),extraLifeDialog:new An(s),stageWinDialog:new kn(s),adBreakExtraLife:new Tn(s),adBreakDoubleScore:new k0(s)},this.state=this.states.initial,this.state.attach(),this.previousState=new pi(this.state)}get previous(){return this.previousState}async changeTo(s){this.previousState.value=this.state,await this.state.detach(),this.state=this.states[s],await this.state.attach()}update(s){this.state.update(s)}}class P0 extends Hs{constructor(t,s=d(2,1)){super(t,s),this.strength=16,this.tiles=this.getTileByIndex(1),this.color=p0,this.tileIndex=g0}get isBreakable(){return!1}setStrength(t){}get score(){return 0}increaseHitCount(){this.angle=I(-.01,.01),this.hitCount++}}class D0 extends Hs{constructor(t,s=d(2,1)){super(t,s)}get isBreakable(){return!0}}class M0{constructor(t){g(this,"destroyed");g(this,"bricks");g(this,"game");this.game=t,this.bricks=new he,this.destroyed=new Ke(0,0,999)}populate(){for(const[t,s]of this.game.stage.current.getCoords()){if(t===Et.Unbreakable){this.bricks.add(new P0(s));continue}[Et.Normal,Et.Hard].includes(t)&&this.bricks.add(new D0(s))}}areEmpty(){return this.bricks.isEmpty()}destroy(){for(const t of this.bricks)t.destroy();this.bricks.clear(),this.destroyed.setVal(0)}*[Symbol.iterator](){for(const t of this.bricks)yield t}}class $0{constructor(){g(this,"coolDown",3e4);g(this,"enabled",!0);g(this,"timer",null);g(this,"timeLeft",0)}async showRewardAd(){if(this.enabled&&je.isCrazyGames())return await window.CrazyGames.SDK.game.gameplayStop(),new Promise((t,s)=>{window.CrazyGames.SDK.ad.requestAd("rewarded",{adStarted:()=>console.info("Ad started"),adError:i=>s(i),adFinished:()=>(this.disableAdManager(),this.enableAdManager(),window.CrazyGames.SDK.game.gameplayStart().finally(t))})})}disableAdManager(){this.enabled=!1,ms(!0),this.timeLeft=this.coolDown/1e3,this.timer=setInterval(()=>{dn(--this.timeLeft)},1e3)}enableAdManager(){setTimeout(()=>{this.enabled=!0,ms(!1),this.timer&&clearTimeout(this.timer)},this.coolDown)}}const I0=`
    // Simple TV Shader Code
    float hash(vec2 p)
    {
        p=fract(p*.3197);
        return fract(1.+sin(51.*p.x+73.*p.y)*13753.3);
    }
    float noise(vec2 p)
    {
        vec2 i=floor(p),f=fract(p),u=f*f*(3.-2.*f);
        return mix(mix(hash(i),hash(i+vec2(1,0)),u.x),mix(hash(i+vec2(0,1)),hash(i+1.),u.x),u.y);
    }
    void mainImage(out vec4 c, vec2 p)
    {
        p /= iResolution.xy;

        // apply fuzz as horizontal offset
        const float fuzz = .001;
        const float fuzzScale = 800.;
        p.x += fuzz*(noise(vec2(p.y*fuzzScale, iTime*9.))*2.-1.);

        // init output color
        c = texture2D(iChannel0, p);

        // chromatic aberration
        const float chromatic = .003;
        c.r = texture2D(iChannel0, p - vec2(chromatic, 0)).r;
        c.b = texture2D(iChannel0, p + vec2(chromatic, 0)).b;

        // tv static noise
        const float staticNoise = .1;
        c += staticNoise * hash(vec2(p + mod(iTime, 1e3)));

        // scan lines
        const float scanlineScale = 800.;
        const float scanlineAlpha = .1;
        c *= 1. + scanlineAlpha*sin(p.y*scanlineScale);

        // black vignette around the outside
        const float vignette = 2.;
        float dx = 2.*p.x - 1., dy = 2.*p.y - 1.;
        c *= 1.-pow((dx*dx + dy*dy)/vignette, 6.);
    }`;Fr(bn.enabled());Xi(re());jr(.1);bn.disabled()&&Hr(-1);class B0{constructor(){g(this,"lives");g(this,"score");g(this,"mode");g(this,"bonus");g(this,"stage");g(this,"state");g(this,"bricks");g(this,"ads");g(this,"balls");g(this,"paddle",null);g(this,"floor",null);this.init=this.init.bind(this),this.update=this.update.bind(this),this.postUpdate=this.postUpdate.bind(this),this.render=this.render.bind(this),this.postRender=this.postRender.bind(this),this.balls=new v0,this.score=new r0(0),this.lives=new x0(3),this.bonus=new b0(this),this.stage=new w0(this),this.mode=new E0(this),this.state=new A0(this),this.bricks=new M0(this),this.ads=new $0}run(t,s){this.stage.execute(s),this.stage.start(),this.mode.execute(t),zr(this.init,this.update,this.postUpdate,this.render,this.postRender,a0)}init(){Ur(new T(1280,720)),Nr(j.scale(.5)),this.paddle=new Is(j),new Te(d(-.5,j.y*.5),d(1,j.y)),new Te(d(j.x+.5,j.y*.5),d(1,j.y)),new Te(d(j.x*.5,j.y),d(j.x+2,1)),setTimeout(()=>this.state.changeTo("idle")),Ne()&&yr(I0,!0)}update(){this.state.update(Vi)}async postUpdate(){await this.mode.update()}render(){vt(G,d(100,100),new m().setHex("#494746")),vt(G,j,new m().setHex("#ce9a80"))}postRender(){this.stage.showCounterText()}}console.info("Is development mode:",je.isDevelopment());const Dn=new B0;window.game=Dn;window.store=yn;S.on("start",async()=>{Dn.run(Ft(),Xe()),je.isCrazyGames()&&await window.CrazyGames.SDK.game.gameplayStart()});const O0=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],z0=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...O0]),L0=new Set(["innerHTML","textContent","innerText","children"]),R0=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),N0=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function U0(e,t){const s=N0[e];return typeof s=="object"?s[t]?s.$:void 0:s}const j0=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),F0={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function H0(e,t,s){let i=s.length,r=t.length,n=i,a=0,o=0,l=t[r-1].nextSibling,h=null;for(;a<r||o<n;){if(t[a]===s[o]){a++,o++;continue}for(;t[r-1]===s[n-1];)r--,n--;if(r===a){const c=n<i?o?s[o-1].nextSibling:s[n-o]:l;for(;o<n;)e.insertBefore(s[o++],c)}else if(n===o)for(;a<r;)(!h||!h.has(t[a]))&&t[a].remove(),a++;else if(t[a]===s[n-1]&&s[o]===t[r-1]){const c=t[--r].nextSibling;e.insertBefore(s[o++],t[a++].nextSibling),e.insertBefore(s[--n],c),t[r]=s[n]}else{if(!h){h=new Map;let u=o;for(;u<n;)h.set(s[u],u++)}const c=h.get(t[a]);if(c!=null)if(o<c&&c<n){let u=a,f=1,b;for(;++u<r&&u<n&&!((b=h.get(t[u]))==null||b!==c+f);)f++;if(f>c-o){const w=t[a];for(;o<c;)e.insertBefore(s[o++],w)}else e.replaceChild(s[o++],t[a++])}else a++;else t[a++].remove()}}}const mi="_$DX_DELEGATE";function W0(e,t,s,i={}){let r;return Ee(n=>{r=n,t===document?e():v(t,e(),t.firstChild?null:void 0,s)},i.owner),()=>{r(),t.textContent=""}}function H(e,t,s){let i;const r=()=>{const a=document.createElement("template");return a.innerHTML=e,s?a.content.firstChild.firstChild:a.content.firstChild},n=t?()=>At(()=>document.importNode(i||(i=r()),!0)):()=>(i||(i=r())).cloneNode(!0);return n.cloneNode=n,n}function de(e,t=window.document){const s=t[mi]||(t[mi]=new Set);for(let i=0,r=e.length;i<r;i++){const n=e[i];s.has(n)||(s.add(n),t.addEventListener(n,J0))}}function Pt(e,t,s){s==null?e.removeAttribute(t):e.setAttribute(t,s)}function V0(e,t,s,i){i==null?e.removeAttributeNS(t,s):e.setAttributeNS(t,s,i)}function G0(e,t){t==null?e.removeAttribute("class"):e.className=t}function Vs(e,t,s,i){if(i)Array.isArray(s)?(e[`$$${t}`]=s[0],e[`$$${t}Data`]=s[1]):e[`$$${t}`]=s;else if(Array.isArray(s)){const r=s[0];e.addEventListener(t,s[0]=n=>r.call(e,s[1],n))}else e.addEventListener(t,s)}function X0(e,t,s={}){const i=Object.keys(t||{}),r=Object.keys(s);let n,a;for(n=0,a=r.length;n<a;n++){const o=r[n];!o||o==="undefined"||t[o]||(yi(e,o,!1),delete s[o])}for(n=0,a=i.length;n<a;n++){const o=i[n],l=!!t[o];!o||o==="undefined"||s[o]===l||!l||(yi(e,o,!0),s[o]=l)}return s}function K0(e,t,s){if(!t)return s?Pt(e,"style"):t;const i=e.style;if(typeof t=="string")return i.cssText=t;typeof s=="string"&&(i.cssText=s=void 0),s||(s={}),t||(t={});let r,n;for(n in s)t[n]==null&&i.removeProperty(n),delete s[n];for(n in t)r=t[n],r!==s[n]&&(i.setProperty(n,r),s[n]=r);return s}function Y0(e,t={},s,i){const r={};return i||F(()=>r.children=Ht(e,t.children,r.children)),F(()=>t.ref&&t.ref(e)),F(()=>q0(e,t,s,!0,r,!0)),r}function v(e,t,s,i){if(s!==void 0&&!i&&(i=[]),typeof t!="function")return Ht(e,t,i,s);F(r=>Ht(e,t(),r,s),i)}function q0(e,t,s,i,r={},n=!1){t||(t={});for(const a in r)if(!(a in t)){if(a==="children")continue;r[a]=bi(e,a,null,r[a],s,n)}for(const a in t){if(a==="children"){i||Ht(e,t.children);continue}const o=t[a];r[a]=bi(e,a,o,r[a],s,n)}}function Z0(e){return e.toLowerCase().replace(/-([a-z])/g,(t,s)=>s.toUpperCase())}function yi(e,t,s){const i=t.trim().split(/\s+/);for(let r=0,n=i.length;r<n;r++)e.classList.toggle(i[r],s)}function bi(e,t,s,i,r,n){let a,o,l,h,c;if(t==="style")return K0(e,s,i);if(t==="classList")return X0(e,s,i);if(s===i)return i;if(t==="ref")n||s(e);else if(t.slice(0,3)==="on:"){const u=t.slice(3);i&&e.removeEventListener(u,i),s&&e.addEventListener(u,s)}else if(t.slice(0,10)==="oncapture:"){const u=t.slice(10);i&&e.removeEventListener(u,i,!0),s&&e.addEventListener(u,s,!0)}else if(t.slice(0,2)==="on"){const u=t.slice(2).toLowerCase(),f=j0.has(u);if(!f&&i){const b=Array.isArray(i)?i[0]:i;e.removeEventListener(u,b)}(f||s)&&(Vs(e,u,s,f),f&&de([u]))}else if(t.slice(0,5)==="attr:")Pt(e,t.slice(5),s);else if((c=t.slice(0,5)==="prop:")||(l=L0.has(t))||!r&&((h=U0(t,e.tagName))||(o=z0.has(t)))||(a=e.nodeName.includes("-")))c&&(t=t.slice(5),o=!0),t==="class"||t==="className"?G0(e,s):a&&!o&&!l?e[Z0(t)]=s:e[h||t]=s;else{const u=r&&t.indexOf(":")>-1&&F0[t.split(":")[0]];u?V0(e,u,t,s):Pt(e,R0[t]||t,s)}return s}function J0(e){const t=`$$${e.type}`;let s=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==s&&Object.defineProperty(e,"target",{configurable:!0,value:s}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return s||document}});s;){const i=s[t];if(i&&!s.disabled){const r=s[`${t}Data`];if(r!==void 0?i.call(s,r,e):i.call(s,e),e.cancelBubble)return}s=s._$host||s.parentNode||s.host}}function Ht(e,t,s,i,r){for(;typeof s=="function";)s=s();if(t===s)return s;const n=typeof t,a=i!==void 0;if(e=a&&s[0]&&s[0].parentNode||e,n==="string"||n==="number")if(n==="number"&&(t=t.toString()),a){let o=s[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),s=Bt(e,s,i,o)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t;else if(t==null||n==="boolean")s=Bt(e,s,i);else{if(n==="function")return F(()=>{let o=t();for(;typeof o=="function";)o=o();s=Ht(e,o,s,i)}),()=>s;if(Array.isArray(t)){const o=[],l=s&&Array.isArray(s);if(_s(o,t,s,r))return F(()=>s=Ht(e,o,s,i,!0)),()=>s;if(o.length===0){if(s=Bt(e,s,i),a)return s}else l?s.length===0?wi(e,o,i):H0(e,s,o):(s&&Bt(e),wi(e,o));s=o}else if(t.nodeType){if(Array.isArray(s)){if(a)return s=Bt(e,s,i,t);Bt(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}else console.warn("Unrecognized value. Skipped inserting",t)}return s}function _s(e,t,s,i){let r=!1;for(let n=0,a=t.length;n<a;n++){let o=t[n],l=s&&s[n],h;if(!(o==null||o===!0||o===!1))if((h=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))r=_s(e,o,l)||r;else if(h==="function")if(i){for(;typeof o=="function";)o=o();r=_s(e,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||r}else e.push(o),r=!0;else{const c=String(o);l&&l.nodeType===3&&l.data===c?e.push(l):e.push(document.createTextNode(c))}}return r}function wi(e,t,s=null){for(let i=0,r=t.length;i<r;i++)e.insertBefore(t[i],s)}function Bt(e,t,s,i){if(s===void 0)return e.textContent="";const r=i||document.createTextNode("");if(t.length){let n=!1;for(let a=t.length-1;a>=0;a--){const o=t[a];if(r!==o){const l=o.parentNode===e;!n&&!a?l?e.replaceChild(r,o):e.insertBefore(r,s):l&&o.remove()}else n=!0}}else e.insertBefore(r,s);return[r]}const Q0=!1,ta=H('<section class="sound visual-effects"><div><fieldset><legend><b>Sound/Music</b></legend><div><input type="checkbox" id="sound"><label for="sound">Sound</label><input type="checkbox" id="music"><label for="music">Music'),Mn=({children:e})=>{const t=({target:i})=>{const{checked:r}=i;on(r),S.emit("sound",r)},s=({target:i})=>{const{checked:r}=i;cn(r),S.emit("music",r)};return(()=>{const i=ta(),r=i.firstChild,n=r.firstChild,a=n.firstChild,o=a.nextSibling,l=o.firstChild,h=l.nextSibling,c=h.nextSibling;return l.addEventListener("change",t),c.addEventListener("change",s),c.disabled=!0,v(r,e,null),F(()=>l.checked=re()),F(()=>c.checked=Ls()),i})()},ea=H('<section class="modes"><fieldset><legend><b>Mode'),sa=H('<div class="mode"><input type="radio"><label>'),$n=()=>{const e=[{name:"Classic",value:L.Classic},{name:"Dynamic",value:L.Dynamic},{name:"Modern",value:L.Modern}],t=s=>()=>{Lt(s),S.emit("modeChange",s)};return(()=>{const s=ea(),i=s.firstChild;return i.firstChild,v(i,P(sn,{each:e,children:r=>(()=>{const n=sa(),a=n.firstChild,o=a.nextSibling;return Vs(a,"change",t(r.value)),v(o,()=>r.name),F(l=>{const h=r.name,c=r.name;return h!==l._v$&&Pt(a,"id",l._v$=h),c!==l._v$2&&Pt(o,"for",l._v$2=c),l},{_v$:void 0,_v$2:void 0}),F(()=>a.checked=Ft()===r.value),n})()}),null),s})()},ia=H('<section><fieldset><legend><b>Levels</b></legend><div class="levels">'),na=H("<div>No items"),ra=H('<div class="level"><input type="radio" name="stage"><label>');window.store=yn;const In=()=>{const[e,t]=N(Xe()),s=i=>()=>{an(i),t(i),S.emit("stageChange",i)};return qi(()=>(S.on("stage-unlocked",xs),()=>S.off("stage-unlocked",xs))),(()=>{const i=ia(),r=i.firstChild,n=r.firstChild,a=n.nextSibling;return v(a,P(sn,{get each(){return js()},get fallback(){return na()},children:(o,l)=>(()=>{const h=ra(),c=h.firstChild,u=c.nextSibling;return Vs(c,"change",s(l())),v(u,()=>o.name),F(f=>{const b=!o.unlocked,w=o.name,_=o.name;return b!==f._v$&&(c.disabled=f._v$=b),w!==f._v$2&&Pt(c,"id",f._v$2=w),_!==f._v$3&&Pt(u,"for",f._v$3=_),f},{_v$:void 0,_v$2:void 0,_v$3:void 0}),F(()=>c.checked=l()===e()),h})()})),i})()},aa=H("<div><div>Current Score: <b>"),oa=H("<fieldset><legend><b>Score</b></legend><div><div><div>High Score: <b>"),Gs=({highScoreOnly:e})=>(()=>{const t=oa(),s=t.firstChild,i=s.nextSibling,r=i.firstChild,n=r.firstChild,a=n.firstChild,o=a.nextSibling;return v(i,P(Os,{when:!e,get children(){const l=aa(),h=l.firstChild,c=h.firstChild,u=c.nextSibling;return v(u,hn),l}}),r),v(o,un),t})(),la=H('<svg stroke-width="0"></svg>',2),ca=H("<title></title>",2);function Vt(e,t){const s=di(e.a,t),[i,r]=t0(s,["src"]);return(()=>{const n=la.cloneNode(!0);return Y0(n,di({get stroke(){return e.a.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},r,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},get innerHTML(){return e.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),v(n,()=>Q0,null),v(n,(()=>{const a=ne(()=>!!t.title);return()=>a()&&(()=>{const o=ca.cloneNode(!0);return v(o,()=>t.title),o})()})(),null),n})()}function ha(e){return Vt({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M10 2a2 2 0 0 1-1.5 1.937v5.087c.863.083 1.5.377 1.5.726 0 .414-.895.75-2 .75s-2-.336-2-.75c0-.35.637-.643 1.5-.726V3.937A2 2 0 1 1 10 2z"/><path d="M0 9.665v1.717a1 1 0 0 0 .553.894l6.553 3.277a2 2 0 0 0 1.788 0l6.553-3.277a1 1 0 0 0 .553-.894V9.665c0-.1-.06-.19-.152-.23L9.5 6.715v.993l5.227 2.178a.125.125 0 0 1 .001.23l-5.94 2.546a2 2 0 0 1-1.576 0l-5.94-2.546a.125.125 0 0 1 .001-.23L6.5 7.708l-.013-.988L.152 9.435a.25.25 0 0 0-.152.23z"/>'},e)}function ua(e){return Vt({a:{viewBox:"0 0 576 512"},c:'<path d="M413.5 237.5c-28.2 4.8-58.2-3.6-80-25.4L295.4 174c-15-15-23.4-35.2-23.4-56.4v-12.1L192.3 62c-5.3-2.9-8.6-8.6-8.3-14.7s3.9-11.5 9.5-14l47.2-21C259.1 4.2 279 0 299.2 0h18.1c36.7 0 72 14 98.7 39.1l44.6 42c24.2 22.8 33.2 55.7 26.6 86L503 183l8-8c9.4-9.4 24.6-9.4 33.9 0l24 24c9.4 9.4 9.4 24.6 0 33.9l-88 88c-9.4 9.4-24.6 9.4-33.9 0l-24-24c-9.4-9.4-9.4-24.6 0-33.9l8-8-17.5-17.5zM27.4 377.1l233.5-194.5c3.5 4.9 7.5 9.6 11.8 14l38.1 38.1c6 6 12.4 11.2 19.2 15.7L134.9 484.6C120.4 502 98.9 512 76.3 512 34.1 512 0 477.8 0 435.7c0-22.6 10.1-44.1 27.4-58.6z"/>'},e)}const da=H('<fieldset><legend><b>Visual effects</b></legend><div><input type="checkbox" id="post-processing"><label for="post-processing">Post processing'),fa=()=>{const e=({target:t})=>{const{checked:s}=t;ln(s),S.emit("postProcessing",Ne)};return(()=>{const t=da(),s=t.firstChild,i=s.nextSibling,r=i.firstChild;return r.addEventListener("change",e),F(()=>r.checked=Ne()),t})()},ga=H('<dialog><h2>Brick Breaker </h2><section class="actions"><button>Play '),pa=()=>{const[e,t]=N(!0),s=()=>{t(!1),S.emit("start")};return(()=>{const i=ga(),r=i.firstChild;r.firstChild;const n=r.nextSibling,a=n.firstChild;return a.firstChild,v(r,P(ua,{}),null),v(i,P(Gs,{highScoreOnly:!0}),n),v(i,P($n,{}),n),v(i,P(In,{}),n),v(i,P(Mn,{get children(){return P(fa,{})}}),n),a.$$click=s,v(a,P(ha,{size:"1.3em"}),null),F(()=>i.open=e()),i})()};de(["click"]);const ma=H('<dialog><h2>Game Over</h2><section class="actions"><button>Start'),ya=()=>{const e=()=>S.emit("startClick");return(()=>{const t=ma(),s=t.firstChild,i=s.nextSibling,r=i.firstChild;return v(t,P(Gs,{}),i),v(t,P($n,{}),i),v(t,P(In,{}),i),v(t,P(Mn,{}),i),r.$$click=e,F(()=>t.open=fn()),t})()};de(["click"]);function Bn(e){return Vt({a:{viewBox:"0 0 24 24"},c:'<path d="M4 8H2v12a2 2 0 0 0 2 2h12v-2H4z"/><path d="M20 2H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm-9 12V6l7 4z"/>'},e)}const ba=H('<span class="timer">'),wa=H('<dialog><h2>Get extra life</h2><p>Watch a short Ad to get an extra chance to beat your high score.</p><section class="actions"><button>No, thanks</button><button>Watch Ad <!> '),xa=()=>{const e=()=>{S.emit("getExtraLife",!1)},t=()=>{S.emit("getExtraLife",!0)};return(()=>{const s=wa(),i=s.firstChild,r=i.nextSibling,n=r.nextSibling,a=n.firstChild,o=a.nextSibling,l=o.firstChild,h=l.nextSibling;return h.nextSibling,a.$$click=e,o.$$click=t,v(o,P(Bn,{}),h),v(o,P(Os,{get when(){return ae()},get children(){const c=ba();return v(c,()=>String(Rs()).padStart(2,"0")),c}}),null),F(c=>{const u=pn(),f=ae();return u!==c._v$&&(s.open=c._v$=u),f!==c._v$2&&(o.disabled=c._v$2=f),c},{_v$:void 0,_v$2:void 0}),s})()};de(["click"]);function Sa(e){return Vt({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-multiplier-2x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 16l4 -4"/><path d="M18 16l-4 -4"/><path d="M6 10a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0"/>'},e)}function va(e){return Vt({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="M12.75 8a4.5 4.5 0 0 1-8.61 1.834l-1.391.565A6.001 6.001 0 0 0 14.25 8 6 6 0 0 0 3.5 4.334V2.5H2v4l.75.75h3.5v-1.5H4.352A4.5 4.5 0 0 1 12.75 8z" clip-rule="evenodd"/>'},e)}function _a(e){return Vt({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M12 2v12h-2V8.5l-5 5v-11l5 5V2z"/>'},e)}const Ca=H('<span class="timer">'),Ta=H('<dialog><h2>You win <span class="emoji">🎉</span></h2><section class="actions"><button>Double score</button><button>Restart </button><button>Next '),Ea=()=>{const[e,t]=N(!1),s=()=>S.emit("doubleWin"),i=()=>S.emit("restartStage"),r=()=>S.emit("nextStage");return qi(()=>{t(Ft()===L.Bonus)},[Ft()]),(()=>{const n=Ta(),a=n.firstChild,o=a.nextSibling,l=o.firstChild;l.firstChild;const h=l.nextSibling;h.firstChild;const c=h.nextSibling;return c.firstChild,v(n,P(Gs,{}),o),l.$$click=s,v(l,P(Sa,{}),null),v(l,P(Bn,{}),null),v(l,P(Os,{get when(){return ae()},get children(){const u=Ca();return v(u,()=>String(Rs()).padStart(2,"0")),u}}),null),h.$$click=i,v(h,P(va,{}),null),c.$$click=r,v(c,P(_a,{}),null),F(u=>{const f=gn(),b=ae(),w=e();return f!==u._v$&&(n.open=u._v$=f),b!==u._v$2&&(l.disabled=u._v$2=b),w!==u._v$3&&(h.disabled=u._v$3=w),u},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()};de(["click"]);window.CrazyGames.SDK.game.sdkGameLoadingStart().then(()=>console.info("CrazyGames SDK loading started")).catch(e=>{console.error(`Error while loading CrazyGames SDK: ${e}`)});W0(()=>[P(pa,{}),P(ya,{}),P(Ea,{}),P(xa,{})],document.body);window.CrazyGames.SDK.game.sdkGameLoadingStop().then(()=>console.info("CrazyGames SDK loading stopped")).catch(e=>{console.error(`Error while stopping CrazyGames SDK loading: ${e}`)});
//# sourceMappingURL=index-a6bec21e.js.map
